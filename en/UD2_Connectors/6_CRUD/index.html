
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../5_Metadata/">
      
      
        <link rel="next" href="../7_Row_to_Object/">
      
      
      <link rel="icon" href="../../../assets/jaume.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.5.42">
    
    
      
        <title>6. CRUD Operations - Accés a Dades</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.0253249f.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="deep-purple" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#1-statements-and-crud-operations" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../" title="Accés a Dades" class="md-header__button md-logo" aria-label="Accés a Dades" data-md-component="logo">
      
  <img src="../../../assets/jaume.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Accés a Dades
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              6. CRUD Operations
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="deep-purple" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="brown" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
      <div class="md-header__option">
  <div class="md-select">
    
    <button class="md-header__button md-icon" aria-label="Select language">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m12.87 15.07-2.54-2.51.03-.03A17.5 17.5 0 0 0 14.07 6H17V4h-7V2H8v2H1v2h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2zm-2.62 7 1.62-4.33L19.12 17z"/></svg>
    </button>
    <div class="md-select__inner">
      <ul class="md-select__list">
        
          <li class="md-select__item">
            <a href="./" hreflang="en" class="md-select__link">
              English
            </a>
          </li>
        
          <li class="md-select__item">
            <a href="../../../UD2_Connectors/6_CRUD/" hreflang="ca" class="md-select__link">
              Valencià
            </a>
          </li>
        
      </ul>
    </div>
  </div>
</div>
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../" title="Accés a Dades" class="md-nav__button md-logo" aria-label="Accés a Dades" data-md-component="logo">
      
  <img src="../../../assets/jaume.png" alt="logo">

    </a>
    Accés a Dades
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Data Access
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Unit 1. Files
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Unit 1. Files
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../UD1_Files/1_File_System/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    1. File System
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../UD1_Files/2_Reading_and_writing_files/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2. Reading and Writing Files
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../UD1_Files/3_XML_Files/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    3. Working with XML Files
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../UD1_Files/4_JSON_Files/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    4. Working with JSON Files
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../UD1_Files/5_Extra_Formats/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    5. Other File Formats
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Unit 2. Connectors
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Unit 2. Connectors
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../1_Object_relational_impedance_mismatch/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    1. Object-relational impedance mismatch
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../2_Connectors/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2. Connectors
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../3_Connecting/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    3. Connecting to the database
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../4_Resultset/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    4. Query results
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../5_Metadata/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    5. Metadata
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    6. CRUD Operations
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    6. CRUD Operations
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#11-create-insert" class="md-nav__link">
    <span class="md-ellipsis">
      1.1. Create (Insert)
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#12-read-select" class="md-nav__link">
    <span class="md-ellipsis">
      1.2. Read (Select)
    </span>
  </a>
  
    <nav class="md-nav" aria-label="1.2. Read (Select)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#121-fixed-sentences" class="md-nav__link">
    <span class="md-ellipsis">
      1.2.1. Fixed sentences
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#122-variable-sentences" class="md-nav__link">
    <span class="md-ellipsis">
      1.2.2. Variable sentences
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#123-prepared-sentences" class="md-nav__link">
    <span class="md-ellipsis">
      1.2.3. Prepared sentences
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#13-update-update-and-delete-delete" class="md-nav__link">
    <span class="md-ellipsis">
      1.3. Update (Update) and Delete (Delete)
    </span>
  </a>
  
    <nav class="md-nav" aria-label="1.3. Update (Update) and Delete (Delete)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#131-delete-sample" class="md-nav__link">
    <span class="md-ellipsis">
      1.3.1. Delete sample
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#132-update-sample" class="md-nav__link">
    <span class="md-ellipsis">
      1.3.2. Update sample
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#14-scripts" class="md-nav__link">
    <span class="md-ellipsis">
      1.4. Scripts
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#15-transactions" class="md-nav__link">
    <span class="md-ellipsis">
      1.5. Transactions
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#16-updatable-resultsets" class="md-nav__link">
    <span class="md-ellipsis">
      1.6. Updatable ResultSets
    </span>
  </a>
  
    <nav class="md-nav" aria-label="1.6. Updatable ResultSets">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#161-resultset-movement" class="md-nav__link">
    <span class="md-ellipsis">
      1.6.1. ResultSet movement
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#162-deleting-rows-in-a-resultset" class="md-nav__link">
    <span class="md-ellipsis">
      1.6.2. Deleting rows in a ResultSet
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#163-updating-rows-in-a-resultset" class="md-nav__link">
    <span class="md-ellipsis">
      1.6.3. Updating rows in a ResultSet
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#164-inserting-rows-in-a-resultset" class="md-nav__link">
    <span class="md-ellipsis">
      1.6.4. Inserting rows in a ResultSet
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../7_Row_to_Object/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    7. From rows to objects
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Unit 3. Hibernate
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Unit 3. Hibernate
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../UD3_Hibernate/1_Mapping/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    1.Object mapping
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../UD3_Hibernate/2_Hibernate/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2. Introduction to Hibernate
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../UD3_Hibernate/3_Entities_Beans/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    3. Entities
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../UD3_Hibernate/4_Relationships/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    4. Relationships
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../UD3_Hibernate/5_HQL/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    5. Queries
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Unit 4. OO Databases
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Unit 4. OO Databases
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../UD4_BDOO/1_Introduction/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    1. Introduction to OO Databases
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../UD4_BDOO/2_ORDB/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2. Objet-Relational Databases
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../UD4_BDOO/3_OODB/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    3. Object-Oriented Databases
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Unit 5. Spring
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            Unit 5. Spring
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../UD5_Spring/1_Data_Access_Services/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    1. Data Access Services
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../UD5_Spring/2_Spring_SpringBoot/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2. Introduction to Spring
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../UD5_Spring/3_API_Rest/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    3. Creating API's REST
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../UD5_Spring/4_Spring_Security/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    4. Security
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../UD5_Spring/5_Spring_Hateoas/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    5. Spring Hateoas
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../UD5_Spring/6_Postman_Swagger/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    6. Test. Postman and Swagger
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" >
        
          
          <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Unit 6. MongoDB
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            Unit 6. MongoDB
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../UD6_MongoDB/1_NoSQL/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    1. NoSQL databases
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../UD6_MongoDB/2_MongoDB/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2. MongoDB
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../UD6_MongoDB/3_ShellOperations/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    3. Working with MongoDB: Basic shell operations
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../UD6_MongoDB/4_Queries/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    4. Mongo Queries
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../UD6_MongoDB/5_Mongo_Java/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    5. MongoDB and Java
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../UD6_MongoDB/6_Spring_MongoDB/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    6. Spring Data MongoDB y API REST
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../license/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    License
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#11-create-insert" class="md-nav__link">
    <span class="md-ellipsis">
      1.1. Create (Insert)
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#12-read-select" class="md-nav__link">
    <span class="md-ellipsis">
      1.2. Read (Select)
    </span>
  </a>
  
    <nav class="md-nav" aria-label="1.2. Read (Select)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#121-fixed-sentences" class="md-nav__link">
    <span class="md-ellipsis">
      1.2.1. Fixed sentences
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#122-variable-sentences" class="md-nav__link">
    <span class="md-ellipsis">
      1.2.2. Variable sentences
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#123-prepared-sentences" class="md-nav__link">
    <span class="md-ellipsis">
      1.2.3. Prepared sentences
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#13-update-update-and-delete-delete" class="md-nav__link">
    <span class="md-ellipsis">
      1.3. Update (Update) and Delete (Delete)
    </span>
  </a>
  
    <nav class="md-nav" aria-label="1.3. Update (Update) and Delete (Delete)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#131-delete-sample" class="md-nav__link">
    <span class="md-ellipsis">
      1.3.1. Delete sample
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#132-update-sample" class="md-nav__link">
    <span class="md-ellipsis">
      1.3.2. Update sample
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#14-scripts" class="md-nav__link">
    <span class="md-ellipsis">
      1.4. Scripts
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#15-transactions" class="md-nav__link">
    <span class="md-ellipsis">
      1.5. Transactions
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#16-updatable-resultsets" class="md-nav__link">
    <span class="md-ellipsis">
      1.6. Updatable ResultSets
    </span>
  </a>
  
    <nav class="md-nav" aria-label="1.6. Updatable ResultSets">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#161-resultset-movement" class="md-nav__link">
    <span class="md-ellipsis">
      1.6.1. ResultSet movement
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#162-deleting-rows-in-a-resultset" class="md-nav__link">
    <span class="md-ellipsis">
      1.6.2. Deleting rows in a ResultSet
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#163-updating-rows-in-a-resultset" class="md-nav__link">
    <span class="md-ellipsis">
      1.6.3. Updating rows in a ResultSet
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#164-inserting-rows-in-a-resultset" class="md-nav__link">
    <span class="md-ellipsis">
      1.6.4. Inserting rows in a ResultSet
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="1-statements-and-crud-operations">1. Statements and CRUD operations</h1>
<p>In this section we are going to study the main goal working with databases: manipulate data. We will always work with the same template:</p>
<ol>
<li>Connect to de database.</li>
<li>Prepare the query</li>
<li>Execute the query</li>
<li>Data processing, if needed.</li>
</ol>
<p>Point 1 has been studied on previous sections. </p>
<p>In order to create the queries, we should use the following classes/interfaces:</p>
<ul>
<li><code>Statement</code> <span class="arithmatex">\(\rightarrow\)</span> It is used in a general way, and it is useful when we want to perform <strong>static SQL statements</strong>, since no
accepts parameters. We create <code>Statement</code> with <code>createStatement()</code> method from <code>Connection</code> class.</li>
<li><code>PreparedStatement</code> <span class="arithmatex">\(\rightarrow\)</span> It is used when we want to launch several requests, and in addition, it is allowed to perform <strong>dynamic sentences</strong>. We create <code>PreparedStatement</code> with <code>prepareStatement()</code> method from <code>Connection</code> class.</li>
<li><code>CallableStatement</code> <span class="arithmatex">\(\rightarrow\)</span> Used to access stored procedures in the database, and also accepts input parameters. We create <code>CallableStatement</code> with <code>prepareCall()</code> method from <code>Connection</code> class.</li>
</ul>
<p>When the statement is ready, we can execute it with:</p>
<ul>
<li><code>executeQuery</code> <span class="arithmatex">\(\rightarrow\)</span> Executes statements that we <strong>expect to return data</strong> (SELECT queries). The return value from this execution is, as you will guess, a ResultSet.</li>
<li><code>executeUpdate</code> <span class="arithmatex">\(\rightarrow\)</span> Executes statements that are not <strong>expected to return data</strong>, but they will be used to modify the database
connected (INSERT, DELETE, UPDATE queries and CREATE TABLE)</li>
</ul>
<h2 id="11-create-insert">1.1. Create (Insert)</h2>
<p>Let's go to see a simple <code>INSERT</code> statement sample.  </p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Java</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-0-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-0-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-0-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-0-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-0-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-0-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-0-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-0-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-0-10">10</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1"></a><span class="n">ConnexioDB</span><span class="w"> </span><span class="n">conDB</span><span class="o">=</span><span class="k">new</span><span class="w"> </span><span class="n">ConnexioDB</span><span class="p">(</span><span class="s">&quot;BDJocs&quot;</span><span class="p">);</span>
<a id="__codelineno-0-2" name="__codelineno-0-2"></a><span class="n">Connection</span><span class="w"> </span><span class="n">con</span><span class="o">=</span><span class="n">conDB</span><span class="p">.</span><span class="na">getConnexio</span><span class="p">();</span>
<a id="__codelineno-0-3" name="__codelineno-0-3"></a>
<a id="__codelineno-0-4" name="__codelineno-0-4"></a><span class="n">String</span><span class="w"> </span><span class="n">SQL</span><span class="o">=</span><span class="s">&quot;INSERT INTO Joc VALUES (1, &#39;Double Dragon&#39;, &#39;Dos germans bessons experts en arts marcials s`han de fer camí en un escenari urbà on  membres de bandes rivals volen deixar-los fora de combat.&#39;, 1);&quot;</span><span class="p">;</span>
<a id="__codelineno-0-5" name="__codelineno-0-5"></a>
<a id="__codelineno-0-6" name="__codelineno-0-6"></a><span class="n">Statement</span><span class="w"> </span><span class="n">st</span><span class="o">=</span><span class="n">con</span><span class="p">.</span><span class="na">createStatement</span><span class="p">();</span>
<a id="__codelineno-0-7" name="__codelineno-0-7"></a>
<a id="__codelineno-0-8" name="__codelineno-0-8"></a><span class="kt">int</span><span class="w"> </span><span class="n">affectedRows</span><span class="o">=</span><span class="n">st</span><span class="p">.</span><span class="na">executeUpdate</span><span class="p">(</span><span class="n">SQL</span><span class="p">);</span>
<a id="__codelineno-0-9" name="__codelineno-0-9"></a>
<a id="__codelineno-0-10" name="__codelineno-0-10"></a><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">affectedRows</span><span class="o">+</span><span class="w"> </span><span class="s">&quot;row has been inserted&quot;</span><span class="p">);</span>
</code></pre></div></td></tr></table></div>
<p>As you can see, is very easy to understand the code. We create an empty Statement and the run the SQL "per se". The execution returns numbres of rows inserted. We will see better ways to insert data, using scripts.</p>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>This code is a reduced version, because when we are working with databases <code>SQLException</code> could appear. We suppose that the connection process is already done.</p>
</div>
<h2 id="12-read-select">1.2. Read (Select)</h2>
<p>Reading is the most important process we will do, because only with the login process inside an App are retrieving information from a database. In all cases we must write the sentence (SQL), execute it and finally process the returned data. Depending on the way we prepare the sentence, we could distinguish between:</p>
<ol>
<li>Fixed sentences</li>
<li>Variable sentences</li>
<li>Prepared sentences</li>
</ol>
<p>We will see both ways in details. We will use for this the <code>Instituto.sql</code> script and database.</p>
<h3 id="121-fixed-sentences">1.2.1. Fixed sentences</h3>
<p>This sentence, as its name says, are fixed or constant sentences. The SQL is fixed, and it has not any variables.</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Java</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-1-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-1-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-1-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-1-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-1-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-1-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-1-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-1-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-1-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-1-10">10</a></span>
<span class="normal"><a href="#__codelineno-1-11">11</a></span>
<span class="normal"><a href="#__codelineno-1-12">12</a></span>
<span class="normal"><a href="#__codelineno-1-13">13</a></span>
<span class="normal"><a href="#__codelineno-1-14">14</a></span>
<span class="normal"><a href="#__codelineno-1-15">15</a></span>
<span class="normal"><a href="#__codelineno-1-16">16</a></span>
<span class="normal"><a href="#__codelineno-1-17">17</a></span>
<span class="normal"><a href="#__codelineno-1-18">18</a></span>
<span class="normal"><a href="#__codelineno-1-19">19</a></span>
<span class="normal"><a href="#__codelineno-1-20">20</a></span>
<span class="normal"><a href="#__codelineno-1-21">21</a></span>
<span class="normal"><a href="#__codelineno-1-22">22</a></span>
<span class="normal"><a href="#__codelineno-1-23">23</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1"></a><span class="c1">// The query</span>
<a id="__codelineno-1-2" name="__codelineno-1-2"></a><span class="n">String</span><span class="w"> </span><span class="n">SQL</span><span class="o">=</span><span class="s">&quot;Select * from Persona&quot;</span><span class="p">;</span>
<a id="__codelineno-1-3" name="__codelineno-1-3"></a><span class="c1">// The statement</span>
<a id="__codelineno-1-4" name="__codelineno-1-4"></a><span class="n">Statement</span><span class="w"> </span><span class="n">st</span><span class="o">=</span><span class="n">con</span><span class="p">.</span><span class="na">createStatement</span><span class="p">();</span>
<a id="__codelineno-1-5" name="__codelineno-1-5"></a><span class="c1">// The execution</span>
<a id="__codelineno-1-6" name="__codelineno-1-6"></a><span class="n">ResultSet</span><span class="w"> </span><span class="n">rst</span><span class="o">=</span><span class="n">st</span><span class="p">.</span><span class="na">executeQuery</span><span class="p">(</span><span class="n">SQL</span><span class="p">);</span>
<a id="__codelineno-1-7" name="__codelineno-1-7"></a>
<a id="__codelineno-1-8" name="__codelineno-1-8"></a><span class="c1">// processing</span>
<a id="__codelineno-1-9" name="__codelineno-1-9"></a><span class="k">while</span><span class="p">(</span><span class="n">rst</span><span class="p">.</span><span class="na">next</span><span class="p">()){</span>
<a id="__codelineno-1-10" name="__codelineno-1-10"></a><span class="w">    </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">print</span><span class="p">(</span><span class="n">ConsoleColors</span><span class="p">.</span><span class="na">BLUE_BRIGHT</span><span class="o">+</span><span class="w"> </span><span class="s">&quot;Person: &quot;</span><span class="o">+</span><span class="w"> </span><span class="n">ConsoleColors</span><span class="p">.</span><span class="na">RESET</span><span class="p">);</span>
<a id="__codelineno-1-11" name="__codelineno-1-11"></a><span class="w">    </span><span class="cm">/*</span>
<a id="__codelineno-1-12" name="__codelineno-1-12"></a><span class="cm">    System.out.println(</span>
<a id="__codelineno-1-13" name="__codelineno-1-13"></a><span class="cm">            rst.getString(3)+ &quot;, &quot;+</span>
<a id="__codelineno-1-14" name="__codelineno-1-14"></a><span class="cm">            rst.getString(2)+ &quot; &quot;+</span>
<a id="__codelineno-1-15" name="__codelineno-1-15"></a><span class="cm">            rst.getInt(4));</span>
<a id="__codelineno-1-16" name="__codelineno-1-16"></a><span class="cm">    */</span>
<a id="__codelineno-1-17" name="__codelineno-1-17"></a><span class="w">    </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span>
<a id="__codelineno-1-18" name="__codelineno-1-18"></a><span class="w">            </span><span class="n">rst</span><span class="p">.</span><span class="na">getString</span><span class="p">(</span><span class="s">&quot;apellidos&quot;</span><span class="p">)</span><span class="o">+</span><span class="w"> </span><span class="s">&quot;, &quot;</span><span class="o">+</span>
<a id="__codelineno-1-19" name="__codelineno-1-19"></a><span class="w">            </span><span class="n">rst</span><span class="p">.</span><span class="na">getString</span><span class="p">(</span><span class="s">&quot;nombre&quot;</span><span class="p">)</span><span class="o">+</span><span class="w"> </span><span class="s">&quot; &quot;</span><span class="o">+</span>
<a id="__codelineno-1-20" name="__codelineno-1-20"></a><span class="w">            </span><span class="n">rst</span><span class="p">.</span><span class="na">getInt</span><span class="p">(</span><span class="s">&quot;edad&quot;</span><span class="p">));</span>
<a id="__codelineno-1-21" name="__codelineno-1-21"></a><span class="p">}</span>
<a id="__codelineno-1-22" name="__codelineno-1-22"></a>
<a id="__codelineno-1-23" name="__codelineno-1-23"></a><span class="n">rst</span><span class="p">.</span><span class="na">close</span><span class="p">();</span>
</code></pre></div></td></tr></table></div>
<p>In the processing of the information, ResultSet has:</p>
<ul>
<li><code>type getType(int columnIndex)</code> <span class="arithmatex">\(\rightarrow\)</span> overloaded method, that return the given datatype, using the ResultSet column's index. Remember that first column is 1 instead of 0. The type will be Int, String, Double, etc. if you know the type. For unknown columns you can use <code>Object</code> as a generic type.</li>
<li><code>type getType(String columnName)</code> <span class="arithmatex">\(\rightarrow\)</span> same as above method but accessing to the column with the name that we have selected in the query or the name in the table.</li>
</ul>
<h3 id="122-variable-sentences">1.2.2. Variable sentences</h3>
<p>Imagine that you want to recover names with <code>Ma</code> inside him.</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">SQL</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-2-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1"></a><span class="n">String</span><span class="w"> </span><span class="k">SQL</span><span class="o">=</span><span class="ss">&quot;Select * from Persona where nombre like &#39;%Ma%&#39;&quot;</span><span class="p">;</span>
</code></pre></div></td></tr></table></div>
<p>In this case, this query is hardcoded, and if you want to change the portion inside the text, you have to edit your code. To avoid hard-coding, we can write:</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Java</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-3-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-3-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-3-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-3-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-3-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-3-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-3-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-3-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-3-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-3-10">10</a></span>
<span class="normal"><a href="#__codelineno-3-11">11</a></span>
<span class="normal"><a href="#__codelineno-3-12">12</a></span>
<span class="normal"><a href="#__codelineno-3-13">13</a></span>
<span class="normal"><a href="#__codelineno-3-14">14</a></span>
<span class="normal"><a href="#__codelineno-3-15">15</a></span>
<span class="normal"><a href="#__codelineno-3-16">16</a></span>
<span class="normal"><a href="#__codelineno-3-17">17</a></span>
<span class="normal"><a href="#__codelineno-3-18">18</a></span>
<span class="normal"><a href="#__codelineno-3-19">19</a></span>
<span class="normal"><a href="#__codelineno-3-20">20</a></span>
<span class="normal"><a href="#__codelineno-3-21">21</a></span>
<span class="normal"><a href="#__codelineno-3-22">22</a></span>
<span class="normal"><a href="#__codelineno-3-23">23</a></span>
<span class="normal"><a href="#__codelineno-3-24">24</a></span>
<span class="normal"><a href="#__codelineno-3-25">25</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1"></a><span class="n">ConnexioDB</span><span class="w"> </span><span class="n">conDB</span><span class="o">=</span><span class="k">new</span><span class="w"> </span><span class="n">ConnexioDB</span><span class="p">(</span><span class="s">&quot;Instituto&quot;</span><span class="p">);</span>
<a id="__codelineno-3-2" name="__codelineno-3-2"></a>
<a id="__codelineno-3-3" name="__codelineno-3-3"></a><span class="n">Connection</span><span class="w"> </span><span class="n">con</span><span class="o">=</span><span class="n">conDB</span><span class="p">.</span><span class="na">getConnexio</span><span class="p">();</span>
<a id="__codelineno-3-4" name="__codelineno-3-4"></a>
<a id="__codelineno-3-5" name="__codelineno-3-5"></a><span class="c1">// hardcoded String</span>
<a id="__codelineno-3-6" name="__codelineno-3-6"></a><span class="c1">// String SQL=&quot;Select * from Persona where nombre like &#39;%Ma%&#39;&quot;;</span>
<a id="__codelineno-3-7" name="__codelineno-3-7"></a>
<a id="__codelineno-3-8" name="__codelineno-3-8"></a><span class="n">String</span><span class="w"> </span><span class="n">nombre</span><span class="o">=</span><span class="n">Utilitats</span><span class="p">.</span><span class="na">leerTextoC</span><span class="p">(</span><span class="s">&quot;Give me part of the name: &quot;</span><span class="p">);</span>
<a id="__codelineno-3-9" name="__codelineno-3-9"></a><span class="c1">// The query</span>
<a id="__codelineno-3-10" name="__codelineno-3-10"></a><span class="n">String</span><span class="w"> </span><span class="n">SQL</span><span class="o">=</span><span class="s">&quot;Select * from Persona where nombre like &#39;%&quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">nombre</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&quot;%&#39;&quot;</span><span class="p">;</span>
<a id="__codelineno-3-11" name="__codelineno-3-11"></a><span class="c1">// The statement</span>
<a id="__codelineno-3-12" name="__codelineno-3-12"></a><span class="n">Statement</span><span class="w"> </span><span class="n">st</span><span class="o">=</span><span class="n">con</span><span class="p">.</span><span class="na">createStatement</span><span class="p">();</span>
<a id="__codelineno-3-13" name="__codelineno-3-13"></a><span class="c1">// The execution</span>
<a id="__codelineno-3-14" name="__codelineno-3-14"></a><span class="n">ResultSet</span><span class="w"> </span><span class="n">rst</span><span class="o">=</span><span class="n">st</span><span class="p">.</span><span class="na">executeQuery</span><span class="p">(</span><span class="n">SQL</span><span class="p">);</span>
<a id="__codelineno-3-15" name="__codelineno-3-15"></a>
<a id="__codelineno-3-16" name="__codelineno-3-16"></a><span class="c1">// processing</span>
<a id="__codelineno-3-17" name="__codelineno-3-17"></a><span class="k">while</span><span class="p">(</span><span class="n">rst</span><span class="p">.</span><span class="na">next</span><span class="p">()){</span>
<a id="__codelineno-3-18" name="__codelineno-3-18"></a><span class="w">    </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">print</span><span class="p">(</span><span class="n">ConsoleColors</span><span class="p">.</span><span class="na">BLUE_BRIGHT</span><span class="o">+</span><span class="w"> </span><span class="s">&quot;People with &quot;</span><span class="w"> </span><span class="o">+</span><span class="n">nombre</span><span class="o">+</span><span class="s">&quot;: &quot;</span><span class="o">+</span><span class="w"> </span><span class="n">ConsoleColors</span><span class="p">.</span><span class="na">RESET</span><span class="p">);</span>
<a id="__codelineno-3-19" name="__codelineno-3-19"></a><span class="w">    </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span>
<a id="__codelineno-3-20" name="__codelineno-3-20"></a><span class="w">            </span><span class="n">rst</span><span class="p">.</span><span class="na">getString</span><span class="p">(</span><span class="s">&quot;apellidos&quot;</span><span class="p">)</span><span class="o">+</span><span class="w"> </span><span class="s">&quot;, &quot;</span><span class="o">+</span>
<a id="__codelineno-3-21" name="__codelineno-3-21"></a><span class="w">            </span><span class="n">rst</span><span class="p">.</span><span class="na">getString</span><span class="p">(</span><span class="s">&quot;nombre&quot;</span><span class="p">)</span><span class="o">+</span><span class="w"> </span><span class="s">&quot; &quot;</span><span class="o">+</span>
<a id="__codelineno-3-22" name="__codelineno-3-22"></a><span class="w">            </span><span class="n">rst</span><span class="p">.</span><span class="na">getInt</span><span class="p">(</span><span class="s">&quot;edad&quot;</span><span class="p">));</span>
<a id="__codelineno-3-23" name="__codelineno-3-23"></a><span class="p">}</span>
<a id="__codelineno-3-24" name="__codelineno-3-24"></a>
<a id="__codelineno-3-25" name="__codelineno-3-25"></a><span class="n">rst</span><span class="p">.</span><span class="na">close</span><span class="p">();</span>
</code></pre></div></td></tr></table></div>
<p>As we can see, the data is now in variables, but the construction of the SQL is more complex. Note that the texts must be between quotation marks and the numbers must not, which makes very easy to do mistakes. But it can be worse, this type of code can incur SQL injection problems, as we see in the example that follows:</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Java</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-4-1">1</a></span>
<span class="normal"><a href="#__codelineno-4-2">2</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1"></a><span class="n">String</span><span class="w"> </span><span class="n">idPersona</span><span class="o">=</span><span class="n">Read</span><span class="p">.</span><span class="na">readText</span><span class="p">(</span><span class="s">&quot;Tell me the id to consult: &quot;</span><span class="p">);</span>
<a id="__codelineno-4-2" name="__codelineno-4-2"></a><span class="n">String</span><span class="w"> </span><span class="n">SQL</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;Select * from Person where idPersona=&quot;</span><span class="o">+</span><span class="n">idPersona</span><span class="p">;</span>
</code></pre></div></td></tr></table></div>
<ul>
<li>If the user enters <code>4</code> <span class="arithmatex">\(\rightarrow\)</span> It will show the person of ID equal to 4</li>
<li>If the user enters <code>4 or 1=1</code> <span class="arithmatex">\(\rightarrow\)</span> It will show all the people</li>
</ul>
<p>We must avoid this type of queries in user validation statements, for which we will use the prepared statements and, obviously to be very careful checking the inputs.</p>
<h3 id="123-prepared-sentences">1.2.3. Prepared sentences</h3>
<p>To avoid the SQL injection problem, as long as we have parameters in our query, we will make use of prepared statements. In the prepared statements, where we have to make use of a <strong>marker</strong>, instead of composing it with concatenations within the String, we will indicate it with a question mark (<code>?</code>), a character called <strong>placeholder</strong>.</p>
<p>Next, we must assign values to these placeholders, using <code>setType(int pos)</code> methods where <code>Type</code> is the data type that we are going to assign and <code>pos</code> is the position of the placeholder, starting with 1. Let's see the example:</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Java</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-5-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-5-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-5-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-5-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-5-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-5-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-5-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-5-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-5-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-5-10">10</a></span>
<span class="normal"><a href="#__codelineno-5-11">11</a></span>
<span class="normal"><a href="#__codelineno-5-12">12</a></span>
<span class="normal"><a href="#__codelineno-5-13">13</a></span>
<span class="normal"><a href="#__codelineno-5-14">14</a></span>
<span class="normal"><a href="#__codelineno-5-15">15</a></span>
<span class="normal"><a href="#__codelineno-5-16">16</a></span>
<span class="normal"><a href="#__codelineno-5-17">17</a></span>
<span class="normal"><a href="#__codelineno-5-18">18</a></span>
<span class="normal"><a href="#__codelineno-5-19">19</a></span>
<span class="normal"><a href="#__codelineno-5-20">20</a></span>
<span class="normal"><a href="#__codelineno-5-21">21</a></span>
<span class="normal"><a href="#__codelineno-5-22">22</a></span>
<span class="normal"><a href="#__codelineno-5-23">23</a></span>
<span class="normal"><a href="#__codelineno-5-24">24</a></span>
<span class="normal"><a href="#__codelineno-5-25">25</a></span>
<span class="normal"><a href="#__codelineno-5-26">26</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1"></a><span class="n">ConnexioDB</span><span class="w"> </span><span class="n">conDB</span><span class="o">=</span><span class="k">new</span><span class="w"> </span><span class="n">ConnexioDB</span><span class="p">(</span><span class="s">&quot;Instituto&quot;</span><span class="p">);</span>
<a id="__codelineno-5-2" name="__codelineno-5-2"></a>
<a id="__codelineno-5-3" name="__codelineno-5-3"></a><span class="n">Connection</span><span class="w"> </span><span class="n">con</span><span class="o">=</span><span class="n">conDB</span><span class="p">.</span><span class="na">getConnexio</span><span class="p">();</span>
<a id="__codelineno-5-4" name="__codelineno-5-4"></a>
<a id="__codelineno-5-5" name="__codelineno-5-5"></a><span class="n">String</span><span class="w"> </span><span class="n">ID</span><span class="o">=</span><span class="n">Utilitats</span><span class="p">.</span><span class="na">leerTextoC</span><span class="p">(</span><span class="s">&quot;Give me an id: &quot;</span><span class="p">);</span>
<a id="__codelineno-5-6" name="__codelineno-5-6"></a><span class="c1">// The query</span>
<a id="__codelineno-5-7" name="__codelineno-5-7"></a><span class="n">String</span><span class="w"> </span><span class="n">SQL</span><span class="o">=</span><span class="s">&quot;Select * from Persona where idPersona = ?&quot;</span><span class="w"> </span><span class="p">;</span>
<a id="__codelineno-5-8" name="__codelineno-5-8"></a><span class="c1">// The statement</span>
<a id="__codelineno-5-9" name="__codelineno-5-9"></a><span class="n">PreparedStatement</span><span class="w"> </span><span class="n">pst</span><span class="o">=</span><span class="n">con</span><span class="p">.</span><span class="na">prepareStatement</span><span class="p">(</span><span class="n">SQL</span><span class="p">);</span>
<a id="__codelineno-5-10" name="__codelineno-5-10"></a><span class="c1">// fill placeholders</span>
<a id="__codelineno-5-11" name="__codelineno-5-11"></a>
<a id="__codelineno-5-12" name="__codelineno-5-12"></a><span class="n">pst</span><span class="p">.</span><span class="na">setString</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="n">ID</span><span class="p">);</span>
<a id="__codelineno-5-13" name="__codelineno-5-13"></a>
<a id="__codelineno-5-14" name="__codelineno-5-14"></a><span class="c1">// The execution</span>
<a id="__codelineno-5-15" name="__codelineno-5-15"></a><span class="n">ResultSet</span><span class="w"> </span><span class="n">rst</span><span class="o">=</span><span class="n">pst</span><span class="p">.</span><span class="na">executeQuery</span><span class="p">();</span>
<a id="__codelineno-5-16" name="__codelineno-5-16"></a>
<a id="__codelineno-5-17" name="__codelineno-5-17"></a><span class="c1">// processing</span>
<a id="__codelineno-5-18" name="__codelineno-5-18"></a><span class="k">while</span><span class="p">(</span><span class="n">rst</span><span class="p">.</span><span class="na">next</span><span class="p">()){</span>
<a id="__codelineno-5-19" name="__codelineno-5-19"></a><span class="w">    </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">print</span><span class="p">(</span><span class="n">ConsoleColors</span><span class="p">.</span><span class="na">BLUE_BRIGHT</span><span class="o">+</span><span class="w"> </span><span class="s">&quot;People with &quot;</span><span class="w"> </span><span class="o">+</span><span class="n">ID</span><span class="o">+</span><span class="s">&quot;: &quot;</span><span class="o">+</span><span class="w"> </span><span class="n">ConsoleColors</span><span class="p">.</span><span class="na">RESET</span><span class="p">);</span>
<a id="__codelineno-5-20" name="__codelineno-5-20"></a><span class="w">    </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span>
<a id="__codelineno-5-21" name="__codelineno-5-21"></a><span class="w">            </span><span class="n">rst</span><span class="p">.</span><span class="na">getString</span><span class="p">(</span><span class="s">&quot;apellidos&quot;</span><span class="p">)</span><span class="o">+</span><span class="w"> </span><span class="s">&quot;, &quot;</span><span class="o">+</span>
<a id="__codelineno-5-22" name="__codelineno-5-22"></a><span class="w">            </span><span class="n">rst</span><span class="p">.</span><span class="na">getString</span><span class="p">(</span><span class="s">&quot;nombre&quot;</span><span class="p">)</span><span class="o">+</span><span class="w"> </span><span class="s">&quot; &quot;</span><span class="o">+</span>
<a id="__codelineno-5-23" name="__codelineno-5-23"></a><span class="w">            </span><span class="n">rst</span><span class="p">.</span><span class="na">getInt</span><span class="p">(</span><span class="s">&quot;edad&quot;</span><span class="p">));</span>
<a id="__codelineno-5-24" name="__codelineno-5-24"></a><span class="p">}</span>
<a id="__codelineno-5-25" name="__codelineno-5-25"></a>
<a id="__codelineno-5-26" name="__codelineno-5-26"></a><span class="n">rst</span><span class="p">.</span><span class="na">close</span><span class="p">();</span>
</code></pre></div></td></tr></table></div>
<div class="admonition tip">
<p class="admonition-title">Advice</p>
<p>You can combine ResultSet with ResultSetMetaData to get the columns name and data types stored in the database. Yoy will find a sample in the platform.</p>
</div>
<h2 id="13-update-update-and-delete-delete">1.3. Update (Update) and Delete (Delete)</h2>
<p>Update and delete a row, are both considered as updates, because they modify the database status. In fact, we also consider inserting as database update too. Both tasks will be inclosed in a <code>executeUpdate()</code> method. Let's go to study through samples:</p>
<h3 id="131-delete-sample">1.3.1. Delete sample</h3>
<p>Let's go to delete rows from a table of people between given ages:</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Java</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-6-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-6-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-6-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-6-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-6-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-6-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-6-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-6-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-6-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-6-10">10</a></span>
<span class="normal"><a href="#__codelineno-6-11">11</a></span>
<span class="normal"><a href="#__codelineno-6-12">12</a></span>
<span class="normal"><a href="#__codelineno-6-13">13</a></span>
<span class="normal"><a href="#__codelineno-6-14">14</a></span>
<span class="normal"><a href="#__codelineno-6-15">15</a></span>
<span class="normal"><a href="#__codelineno-6-16">16</a></span>
<span class="normal"><a href="#__codelineno-6-17">17</a></span>
<span class="normal"><a href="#__codelineno-6-18">18</a></span>
<span class="normal"><a href="#__codelineno-6-19">19</a></span>
<span class="normal"><a href="#__codelineno-6-20">20</a></span>
<span class="normal"><a href="#__codelineno-6-21">21</a></span>
<span class="normal"><a href="#__codelineno-6-22">22</a></span>
<span class="normal"><a href="#__codelineno-6-23">23</a></span>
<span class="normal"><a href="#__codelineno-6-24">24</a></span>
<span class="normal"><a href="#__codelineno-6-25">25</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1"></a><span class="n">ConnexioDB</span><span class="w"> </span><span class="n">conDB</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ConnexioDB</span><span class="p">(</span><span class="s">&quot;Instituto&quot;</span><span class="p">);</span>
<a id="__codelineno-6-2" name="__codelineno-6-2"></a><span class="n">Connection</span><span class="w"> </span><span class="n">con</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">conDB</span><span class="p">.</span><span class="na">getConnexio</span><span class="p">();</span>
<a id="__codelineno-6-3" name="__codelineno-6-3"></a>
<a id="__codelineno-6-4" name="__codelineno-6-4"></a><span class="c1">// give the age&#39;s bounds</span>
<a id="__codelineno-6-5" name="__codelineno-6-5"></a><span class="kt">int</span><span class="w"> </span><span class="n">minAge</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Utilitats</span><span class="p">.</span><span class="na">leerEnteroC</span><span class="p">(</span><span class="s">&quot;Give me minimal age: &quot;</span><span class="p">);</span>
<a id="__codelineno-6-6" name="__codelineno-6-6"></a><span class="kt">int</span><span class="w"> </span><span class="n">maxAge</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Utilitats</span><span class="p">.</span><span class="na">leerEnteroC</span><span class="p">(</span><span class="s">&quot;Give me maximun age: &quot;</span><span class="p">);</span>
<a id="__codelineno-6-7" name="__codelineno-6-7"></a>
<a id="__codelineno-6-8" name="__codelineno-6-8"></a><span class="c1">// The query</span>
<a id="__codelineno-6-9" name="__codelineno-6-9"></a><span class="n">String</span><span class="w"> </span><span class="n">SQL</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;Delete from Persona where edad between ? and ?&quot;</span><span class="p">;</span>
<a id="__codelineno-6-10" name="__codelineno-6-10"></a>
<a id="__codelineno-6-11" name="__codelineno-6-11"></a><span class="c1">// The statement</span>
<a id="__codelineno-6-12" name="__codelineno-6-12"></a><span class="n">PreparedStatement</span><span class="w"> </span><span class="n">pst</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">con</span><span class="p">.</span><span class="na">prepareStatement</span><span class="p">(</span><span class="n">SQL</span><span class="p">);</span>
<a id="__codelineno-6-13" name="__codelineno-6-13"></a>
<a id="__codelineno-6-14" name="__codelineno-6-14"></a><span class="c1">// fill placeholders            </span>
<a id="__codelineno-6-15" name="__codelineno-6-15"></a><span class="n">pst</span><span class="p">.</span><span class="na">setInt</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="n">minAge</span><span class="p">);</span>
<a id="__codelineno-6-16" name="__codelineno-6-16"></a><span class="n">pst</span><span class="p">.</span><span class="na">setInt</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="n">maxAge</span><span class="p">);</span>
<a id="__codelineno-6-17" name="__codelineno-6-17"></a>
<a id="__codelineno-6-18" name="__codelineno-6-18"></a><span class="c1">// show the query after resolve placeholders</span>
<a id="__codelineno-6-19" name="__codelineno-6-19"></a><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">pst</span><span class="p">);</span>
<a id="__codelineno-6-20" name="__codelineno-6-20"></a>
<a id="__codelineno-6-21" name="__codelineno-6-21"></a><span class="c1">// The execution</span>
<a id="__codelineno-6-22" name="__codelineno-6-22"></a><span class="kt">int</span><span class="w"> </span><span class="n">deletedtedRows</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">pst</span><span class="p">.</span><span class="na">executeUpdate</span><span class="p">();</span>
<a id="__codelineno-6-23" name="__codelineno-6-23"></a>
<a id="__codelineno-6-24" name="__codelineno-6-24"></a><span class="c1">// how many roas affecte</span>
<a id="__codelineno-6-25" name="__codelineno-6-25"></a><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">deletedtedRows</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&quot; has been deleted.&quot;</span><span class="p">);</span>
</code></pre></div></td></tr></table></div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Deleting data is a very sensitive operation. Be careful to:</p>
<ul>
<li>Don't forget <code>WHERE</code> clause when deleting, because you will delete all data from the table.</li>
<li>If you want to delete all the table, including the structure (definition + table), you must use <code>DROP TABLE</code> instead of <code>DELETE</code>.</li>
<li>If you try to delete a row pointed by a foreign key, you will get the <code>SQLIntegrityConstraintViolationException</code> and a message like <em>Cannot delete or update a parent row: a foreign key constraint fails</em>.</li>
</ul>
</div>
<h3 id="132-update-sample">1.3.2. Update sample</h3>
<p>Let's go to add years to given id people:</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Java</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-7-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-7-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-7-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-7-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-7-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-7-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-7-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-7-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-7-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-7-10">10</a></span>
<span class="normal"><a href="#__codelineno-7-11">11</a></span>
<span class="normal"><a href="#__codelineno-7-12">12</a></span>
<span class="normal"><a href="#__codelineno-7-13">13</a></span>
<span class="normal"><a href="#__codelineno-7-14">14</a></span>
<span class="normal"><a href="#__codelineno-7-15">15</a></span>
<span class="normal"><a href="#__codelineno-7-16">16</a></span>
<span class="normal"><a href="#__codelineno-7-17">17</a></span>
<span class="normal"><a href="#__codelineno-7-18">18</a></span>
<span class="normal"><a href="#__codelineno-7-19">19</a></span>
<span class="normal"><a href="#__codelineno-7-20">20</a></span>
<span class="normal"><a href="#__codelineno-7-21">21</a></span>
<span class="normal"><a href="#__codelineno-7-22">22</a></span>
<span class="normal"><a href="#__codelineno-7-23">23</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1"></a><span class="n">ConnexioDB</span><span class="w"> </span><span class="n">conDB</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ConnexioDB</span><span class="p">(</span><span class="s">&quot;Instituto&quot;</span><span class="p">);</span>
<a id="__codelineno-7-2" name="__codelineno-7-2"></a>
<a id="__codelineno-7-3" name="__codelineno-7-3"></a><span class="n">Connection</span><span class="w"> </span><span class="n">con</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">conDB</span><span class="p">.</span><span class="na">getConnexio</span><span class="p">();</span>
<a id="__codelineno-7-4" name="__codelineno-7-4"></a>
<a id="__codelineno-7-5" name="__codelineno-7-5"></a><span class="c1">// give the age&#39;s bounds</span>
<a id="__codelineno-7-6" name="__codelineno-7-6"></a><span class="kt">int</span><span class="w"> </span><span class="n">difAge</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Utilitats</span><span class="p">.</span><span class="na">leerEnteroC</span><span class="p">(</span><span class="s">&quot;Give me number oy years: &quot;</span><span class="p">);</span>
<a id="__codelineno-7-7" name="__codelineno-7-7"></a><span class="kt">int</span><span class="w"> </span><span class="n">idMin</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Utilitats</span><span class="p">.</span><span class="na">leerEnteroC</span><span class="p">(</span><span class="s">&quot;Give me minimum id: &quot;</span><span class="p">);</span>
<a id="__codelineno-7-8" name="__codelineno-7-8"></a>
<a id="__codelineno-7-9" name="__codelineno-7-9"></a><span class="c1">// The query</span>
<a id="__codelineno-7-10" name="__codelineno-7-10"></a><span class="n">String</span><span class="w"> </span><span class="n">SQL</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;Update Persona set edad=edad+ ? where idPersona &gt; ?&quot;</span><span class="p">;</span>
<a id="__codelineno-7-11" name="__codelineno-7-11"></a>
<a id="__codelineno-7-12" name="__codelineno-7-12"></a><span class="c1">// The statement</span>
<a id="__codelineno-7-13" name="__codelineno-7-13"></a><span class="n">PreparedStatement</span><span class="w"> </span><span class="n">pst</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">con</span><span class="p">.</span><span class="na">prepareStatement</span><span class="p">(</span><span class="n">SQL</span><span class="p">);</span>
<a id="__codelineno-7-14" name="__codelineno-7-14"></a>
<a id="__codelineno-7-15" name="__codelineno-7-15"></a><span class="c1">// fill placeholders            </span>
<a id="__codelineno-7-16" name="__codelineno-7-16"></a><span class="n">pst</span><span class="p">.</span><span class="na">setInt</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="n">difAge</span><span class="p">);</span>
<a id="__codelineno-7-17" name="__codelineno-7-17"></a><span class="n">pst</span><span class="p">.</span><span class="na">setInt</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="n">idMin</span><span class="p">);</span>
<a id="__codelineno-7-18" name="__codelineno-7-18"></a>
<a id="__codelineno-7-19" name="__codelineno-7-19"></a><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">pst</span><span class="p">);</span>
<a id="__codelineno-7-20" name="__codelineno-7-20"></a><span class="c1">// The execution</span>
<a id="__codelineno-7-21" name="__codelineno-7-21"></a><span class="kt">int</span><span class="w"> </span><span class="n">updatedRows</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">pst</span><span class="p">.</span><span class="na">executeUpdate</span><span class="p">();</span>
<a id="__codelineno-7-22" name="__codelineno-7-22"></a>
<a id="__codelineno-7-23" name="__codelineno-7-23"></a><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">updatedRows</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&quot; has been updated.&quot;</span><span class="p">);</span>
</code></pre></div></td></tr></table></div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Remember to: </p>
<ul>
<li><code>UPDATE</code> clause don't need <code>FROM</code> because we say the table name directly.</li>
<li>It appears <code>SET</code> clause, with pairs <code>field=updatet_value</code>, to assign the new value to selected fields.</li>
<li>If we forget <code>FROM</code> clause, all rows will be updated.</li>
</ul>
</div>
<h2 id="14-scripts">1.4. Scripts</h2>
<p>A script, which we usually have created in an external file, is a set of SQL statements executed in order from top to bottom. We could take as a strategy to read the file line by line and execute it one by one, but JDBC allows executing a set of instructions in block. To do this, the first thing we need to do is enable multiple execution by adding a parameter to the connection, which is <code>allowMultiQueries=true</code>.</p>
<p>Next, we must load the file and compose a String with the entire script. To normalize it and make it totally portable, we must be careful with the line breaks, since depending on the system it is a <code>\n</code> or a <code>\r\n</code> combination. We can read line by line and save it in a <code>StringBuilder</code>, adding <code>System.getProperty("line.separator")</code> as separators.</p>
<p>Then we will only need to create a statement with said String and execute it with <code>executeUpdate()</code>. Let's see it:</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Java</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-8-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-8-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-8-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-8-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-8-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-8-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-8-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-8-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-8-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-8-10">10</a></span>
<span class="normal"><a href="#__codelineno-8-11">11</a></span>
<span class="normal"><a href="#__codelineno-8-12">12</a></span>
<span class="normal"><a href="#__codelineno-8-13">13</a></span>
<span class="normal"><a href="#__codelineno-8-14">14</a></span>
<span class="normal"><a href="#__codelineno-8-15">15</a></span>
<span class="normal"><a href="#__codelineno-8-16">16</a></span>
<span class="normal"><a href="#__codelineno-8-17">17</a></span>
<span class="normal"><a href="#__codelineno-8-18">18</a></span>
<span class="normal"><a href="#__codelineno-8-19">19</a></span>
<span class="normal"><a href="#__codelineno-8-20">20</a></span>
<span class="normal"><a href="#__codelineno-8-21">21</a></span>
<span class="normal"><a href="#__codelineno-8-22">22</a></span>
<span class="normal"><a href="#__codelineno-8-23">23</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1"></a><span class="n">ConnexioDB</span><span class="w"> </span><span class="n">conDB</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ConnexioDB</span><span class="p">(</span><span class="s">&quot;Instituto&quot;</span><span class="p">);</span>
<a id="__codelineno-8-2" name="__codelineno-8-2"></a>
<a id="__codelineno-8-3" name="__codelineno-8-3"></a><span class="n">Connection</span><span class="w"> </span><span class="n">con</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">conDB</span><span class="p">.</span><span class="na">getConnexio</span><span class="p">();</span>
<a id="__codelineno-8-4" name="__codelineno-8-4"></a>
<a id="__codelineno-8-5" name="__codelineno-8-5"></a><span class="n">File</span><span class="w"> </span><span class="n">script</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">File</span><span class="p">(</span><span class="s">&quot;sql/EsquemaCine.sql&quot;</span><span class="p">);</span>
<a id="__codelineno-8-6" name="__codelineno-8-6"></a>
<a id="__codelineno-8-7" name="__codelineno-8-7"></a><span class="n">BufferedReader</span><span class="w"> </span><span class="n">bfr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">bfr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">BufferedReader</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">FileReader</span><span class="p">(</span><span class="n">script</span><span class="p">));</span>
<a id="__codelineno-8-8" name="__codelineno-8-8"></a>
<a id="__codelineno-8-9" name="__codelineno-8-9"></a><span class="n">String</span><span class="w"> </span><span class="n">line</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">null</span><span class="p">;</span>
<a id="__codelineno-8-10" name="__codelineno-8-10"></a><span class="n">StringBuilder</span><span class="w"> </span><span class="n">sb</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">StringBuilder</span><span class="p">();</span>
<a id="__codelineno-8-11" name="__codelineno-8-11"></a>
<a id="__codelineno-8-12" name="__codelineno-8-12"></a><span class="c1">// Obtenemos el salto de linea del sistema subyacente</span>
<a id="__codelineno-8-13" name="__codelineno-8-13"></a><span class="n">String</span><span class="w"> </span><span class="n">breakLine</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">System</span><span class="p">.</span><span class="na">getProperty</span><span class="p">(</span><span class="s">&quot;line.separator&quot;</span><span class="p">);</span>
<a id="__codelineno-8-14" name="__codelineno-8-14"></a>
<a id="__codelineno-8-15" name="__codelineno-8-15"></a><span class="k">while</span><span class="w"> </span><span class="p">((</span><span class="n">line</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">bfr</span><span class="p">.</span><span class="na">readLine</span><span class="p">())</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">null</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-8-16" name="__codelineno-8-16"></a><span class="w">    </span><span class="n">sb</span><span class="p">.</span><span class="na">append</span><span class="p">(</span><span class="n">line</span><span class="p">);</span>
<a id="__codelineno-8-17" name="__codelineno-8-17"></a><span class="w">    </span><span class="n">sb</span><span class="p">.</span><span class="na">append</span><span class="p">(</span><span class="n">breakLine</span><span class="p">);</span>
<a id="__codelineno-8-18" name="__codelineno-8-18"></a><span class="p">}</span>
<a id="__codelineno-8-19" name="__codelineno-8-19"></a>
<a id="__codelineno-8-20" name="__codelineno-8-20"></a><span class="n">String</span><span class="w"> </span><span class="n">query</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sb</span><span class="p">.</span><span class="na">toString</span><span class="p">();</span><span class="w">   </span><span class="c1">// generemos el Script en un String</span>
<a id="__codelineno-8-21" name="__codelineno-8-21"></a><span class="n">Statement</span><span class="w"> </span><span class="n">stm</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">con</span><span class="p">.</span><span class="na">createStatement</span><span class="p">();</span>
<a id="__codelineno-8-22" name="__codelineno-8-22"></a><span class="kt">int</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">stm</span><span class="p">.</span><span class="na">executeUpdate</span><span class="p">(</span><span class="n">query</span><span class="p">);</span>
<a id="__codelineno-8-23" name="__codelineno-8-23"></a><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;Script ejecutado con salida &quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">result</span><span class="p">);</span>
</code></pre></div></td></tr></table></div>
<div class="admonition tip">
<p class="admonition-title">Advice</p>
<p>Do you remember <code>Files</code> and <code>Paths</code> classes? Rewrite last sample to get cleaner code.</p>
</div>
<h2 id="15-transactions">1.5. Transactions</h2>
<p>If we want to protect data integrity, as well as avoid unexpected blocking situations in multithreaded applications, we must protect our operations, especially those that modify data through the use of transactions.</p>
<p>A transaction defines an execution environment in which save operations remain stored in memory until the transaction is completed. If at a certain moment something fails, the state is returned to the initial point of the same (initial point), or some intermediate marking point. By default, opening a <strong>connection starts a transaction</strong>.</p>
<ul>
<li>Each execution on the connection generates a transaction on itself. </li>
<li>If we want to disable this option so that the transaction encompasses several executions, we must mark it through <code>Connection.setAutoCommit(false);</code>.</li>
<li>To definitively accept the transaction we will do it through <code>Connection.commit();</code> </li>
<li>To cancel the transaction <code>Connection.rollback();</code></li>
</ul>
<h2 id="16-updatable-resultsets">1.6. Updatable ResultSets</h2>
<p>The working methods revised in previous sections, specially when updating or deleting rows, works directly on the database. It means that you delete or update a row without loading previously in memory. What happens if you want to show data to user and then the user decide to delete or update the row. In this time, is better to use updatable ResultSet.</p>
<p>We have studied ResultSet as a collection of rows, and used it only for reading. We can use it to edit and delete data too. To do this, we need to open the ResultSet in different way as we have seen. For last, but not least, it will depend on the database the availability to crete this kind of ResultSets.</p>
<p>To get it, not depends on ResultSet even how Statement was created. We must use this constructor:</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Java</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-9-1">1</a></span>
<span class="normal"><a href="#__codelineno-9-2">2</a></span>
<span class="normal"><a href="#__codelineno-9-3">3</a></span>
<span class="normal"><a href="#__codelineno-9-4">4</a></span>
<span class="normal"><a href="#__codelineno-9-5">5</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-9-1" name="__codelineno-9-1"></a><span class="kd">public</span><span class="w"> </span><span class="kd">abstract</span><span class="w"> </span><span class="n">Statement</span><span class="w"> </span><span class="nf">createStatement</span><span class="p">(</span>
<a id="__codelineno-9-2" name="__codelineno-9-2"></a><span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">arg0</span><span class="p">,</span><span class="w">   </span><span class="c1">// resultSetType           </span>
<a id="__codelineno-9-3" name="__codelineno-9-3"></a><span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">arg1</span><span class="p">,</span><span class="w">   </span><span class="c1">// resultSetConcurrency</span>
<a id="__codelineno-9-4" name="__codelineno-9-4"></a><span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">arg2</span><span class="p">)</span><span class="w">   </span><span class="c1">// resultSetHoldability</span>
<a id="__codelineno-9-5" name="__codelineno-9-5"></a><span class="w">    </span><span class="kd">throws</span><span class="w"> </span><span class="n">SQLException</span>
</code></pre></div></td></tr></table></div>
<p>As you can see, there are 3 arguments to tell what kind or ResultSet we give in the end. These three arguments can be:</p>
<ul>
<li><code>resultSetType</code> <span class="arithmatex">\(\rightarrow\)</span> these are options about moving and passing through rows in the ResultSet:</li>
<li><code>TYPE_FORWARD_ONLY</code> <span class="arithmatex">\(\rightarrow\)</span> <strong>default option</strong>. ResultSet can be passed one time only.</li>
<li><code>TYPE_SCROLL_INSENSITIVE</code> <span class="arithmatex">\(\rightarrow\)</span> Allow rewinding and skipping to an absolute or relative position.</li>
<li><code>TYPE_SCROLL_SENSITIVE</code> <span class="arithmatex">\(\rightarrow\)</span> Same as before but allow seeing changes done in the database.</li>
<li><code>ResultSetConcurrency</code> <span class="arithmatex">\(\rightarrow\)</span> these are options about if ResultSet can be updated or no:</li>
<li><code>CONCUR_READ_ONLY</code>  <span class="arithmatex">\(\rightarrow\)</span> <strong>default option</strong>. Read only. If we want to update something, only cas use <code>DELETE</code> or <code>UPDATE</code> clauses.</li>
<li><code>CONCUR_UPDATABLE</code>  <span class="arithmatex">\(\rightarrow\)</span> ResultSet's rows can be updated or deleted.</li>
<li><code>ResultSetHoldability</code> these options are about behavior closing ResultSet:</li>
<li><code>HOLD_CURSORS_OVER_COMMIT</code> <span class="arithmatex">\(\rightarrow\)</span> ResultSet remains opened after commit the transaction.</li>
<li><code>CLOSE_CURSORS_AT_COMMIT</code>   <span class="arithmatex">\(\rightarrow\)</span> ResultSet is closed after commit the transaction. It improves performance.</li>
</ul>
<p>In next sample we could ask our DBMS if these kinds of ResultSet are supported:</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Java</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-10-1">1</a></span>
<span class="normal"><a href="#__codelineno-10-2">2</a></span>
<span class="normal"><a href="#__codelineno-10-3">3</a></span>
<span class="normal"><a href="#__codelineno-10-4">4</a></span>
<span class="normal"><a href="#__codelineno-10-5">5</a></span>
<span class="normal"><a href="#__codelineno-10-6">6</a></span>
<span class="normal"><a href="#__codelineno-10-7">7</a></span>
<span class="normal"><a href="#__codelineno-10-8">8</a></span>
<span class="normal"><a href="#__codelineno-10-9">9</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-10-1" name="__codelineno-10-1"></a><span class="n">ConnexioDB</span><span class="w"> </span><span class="n">conDB</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ConnexioDB</span><span class="p">(</span><span class="s">&quot;Instituto&quot;</span><span class="p">);</span>
<a id="__codelineno-10-2" name="__codelineno-10-2"></a><span class="n">Connection</span><span class="w"> </span><span class="n">con</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">conDB</span><span class="p">.</span><span class="na">getConnexio</span><span class="p">();</span>
<a id="__codelineno-10-3" name="__codelineno-10-3"></a><span class="n">DatabaseMetaData</span><span class="w"> </span><span class="n">dbmd</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">con</span><span class="p">.</span><span class="na">getMetaData</span><span class="p">();</span>
<a id="__codelineno-10-4" name="__codelineno-10-4"></a>
<a id="__codelineno-10-5" name="__codelineno-10-5"></a><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;TYPE_FORWARD_ONLY: &quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">dbmd</span><span class="p">.</span><span class="na">supportsResultSetType</span><span class="p">(</span><span class="n">ResultSet</span><span class="p">.</span><span class="na">TYPE_FORWARD_ONLY</span><span class="p">));</span>
<a id="__codelineno-10-6" name="__codelineno-10-6"></a><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;TYPE_SCROLL_INSENSITIVE: &quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">dbmd</span><span class="p">.</span><span class="na">supportsResultSetType</span><span class="p">(</span><span class="n">ResultSet</span><span class="p">.</span><span class="na">TYPE_SCROLL_INSENSITIVE</span><span class="p">));</span>
<a id="__codelineno-10-7" name="__codelineno-10-7"></a><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;TYPE_SCROLL_SENSITIVE: &quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">dbmd</span><span class="p">.</span><span class="na">supportsResultSetType</span><span class="p">(</span><span class="n">ResultSet</span><span class="p">.</span><span class="na">TYPE_SCROLL_SENSITIVE</span><span class="p">));</span>
<a id="__codelineno-10-8" name="__codelineno-10-8"></a><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;CONCUR_READ_ONLY: &quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">dbmd</span><span class="p">.</span><span class="na">supportsResultSetConcurrency</span><span class="p">(</span><span class="n">ResultSet</span><span class="p">.</span><span class="na">TYPE_SCROLL_INSENSITIVE</span><span class="p">,</span><span class="w"> </span><span class="n">ResultSet</span><span class="p">.</span><span class="na">CONCUR_READ_ONLY</span><span class="p">));</span>
<a id="__codelineno-10-9" name="__codelineno-10-9"></a><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;CONCUR_UPDATABLE: &quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">dbmd</span><span class="p">.</span><span class="na">supportsResultSetConcurrency</span><span class="p">(</span><span class="n">ResultSet</span><span class="p">.</span><span class="na">TYPE_SCROLL_INSENSITIVE</span><span class="p">,</span><span class="w"> </span><span class="n">ResultSet</span><span class="p">.</span><span class="na">CONCUR_UPDATABLE</span><span class="p">));</span>
</code></pre></div></td></tr></table></div>
<h3 id="161-resultset-movement">1.6.1. ResultSet movement</h3>
<p>As we can see, not only could move cursor forward:</p>
<ul>
<li><code>next</code>, <code>previous</code>, <code>first</code> and <code>last</code> <span class="arithmatex">\(\rightarrow\)</span> as the name says, move forward, backward, beginning and last row. It returns true if the cursor is pointing over a row and false otherwise.</li>
<li><code>beforeFirst</code> and <code>afterLast</code><span class="arithmatex">\(\rightarrow\)</span> the cursor will point out of the rows, before the first or after the last row.</li>
<li><code>relative(int n)</code> <span class="arithmatex">\(\rightarrow\)</span> the cursor moves <em>n</em> rows (forward or backward, depending on the sign).</li>
<li><code>absolute(int n)</code> <span class="arithmatex">\(\rightarrow\)</span> the cursor is pointed on row <em>n</em>.</li>
</ul>
<h3 id="162-deleting-rows-in-a-resultset">1.6.2. Deleting rows in a ResultSet</h3>
<p>After placing the cursor on the row to be deleted we can delete it from the ResultSet (and from the database) with the <code>deleteRow()</code> method. When deleting a row, the cursor will be pointing to the row before the one deleted.</p>
<h3 id="163-updating-rows-in-a-resultset">1.6.3. Updating rows in a ResultSet</h3>
<p>After placing the cursor on the desired row, we must:</p>
<ol>
<li>Update the desired columns, using the <code>updateType(int column, type newValue)</code> method, where the i-th column (or with its name) is assigned the new value of the given type.</li>
<li>Once all the desired columns have been modified, the changes are saved with <code>updateRow()</code>.</li>
</ol>
<div class="admonition tip">
<p class="admonition-title">Advice</p>
<p>We can't update an entire row, we should update column by column and then update the row.</p>
</div>
<h3 id="164-inserting-rows-in-a-resultset">1.6.4. Inserting rows in a ResultSet</h3>
<p>If we want to insert a new row in a ResultSet, we must:</p>
<ol>
<li>Generate a new empty row, and this is achieved with the <code>moveToInsertRow()</code>. </li>
<li>On this row we apply the <code>updateType(int column, type newValue)</code> method to all the columns that we must set a value, and finally</li>
<li>We will proceed to insert the new row with <code>insertRow()</code>.</li>
</ol>
<p>!!! warning "Important</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Text Only</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span><code>- These Update, Delete and Insert operations can only be performed on queries that originate in a table without groupings.
- To avoid complexity in our programs, it is worth assessing the convenience of translating the ResultSet updates to pure SQL and executing it natively in the databases through new statements.
</code></pre></div></td></tr></table></div>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../../..", "features": ["content.code.copy", "content.code.select", "content.code.annotate"], "search": "../../../assets/javascripts/workers/search.6ce7567c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../../assets/javascripts/bundle.83f73b43.min.js"></script>
      
        <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      
    
  </body>
</html>