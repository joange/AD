
<!doctype html>
<html lang="ca" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../1_Data_Access_Services/">
      
      
        <link rel="next" href="../3_API_Rest/">
      
      
      <link rel="icon" href="../../assets/jaume.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.5.42">
    
    
      
        <title>2. Introducció a Spring - Accés a Dades</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.0253249f.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="deep-purple" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#1-spring-and-spring-boot" class="md-skip">
          Salta el contingut
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Capçalera">
    <a href="../.." title="Accés a Dades" class="md-header__button md-logo" aria-label="Accés a Dades" data-md-component="logo">
      
  <img src="../../assets/jaume.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Accés a Dades
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              2. Introducció a Spring
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="deep-purple" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="brown" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
      <div class="md-header__option">
  <div class="md-select">
    
    <button class="md-header__button md-icon" aria-label="Selecciona la llengua">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m12.87 15.07-2.54-2.51.03-.03A17.5 17.5 0 0 0 14.07 6H17V4h-7V2H8v2H1v2h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2zm-2.62 7 1.62-4.33L19.12 17z"/></svg>
    </button>
    <div class="md-select__inner">
      <ul class="md-select__list">
        
          <li class="md-select__item">
            <a href="../../en/UD5_Spring/2_Spring_SpringBoot/" hreflang="en" class="md-select__link">
              English
            </a>
          </li>
        
          <li class="md-select__item">
            <a href="./" hreflang="ca" class="md-select__link">
              Valencià
            </a>
          </li>
        
      </ul>
    </div>
  </div>
</div>
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Cerca" placeholder="Cerca" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Cerca">
        
        <button type="reset" class="md-search__icon md-icon" title="Neteja" aria-label="Neteja" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Inicialitzant cerca
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navegació" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Accés a Dades" class="md-nav__button md-logo" aria-label="Accés a Dades" data-md-component="logo">
      
  <img src="../../assets/jaume.png" alt="logo">

    </a>
    Accés a Dades
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Accés a Dades - Informació del mòdul
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Unitat 1. Fitxers
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Unitat 1. Fitxers
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../UD1_Files/1_File_System/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    1. Sistema de Fitxers
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../UD1_Files/2_Reading_and_writing_files/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2. Llegint i Escrivint
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../UD1_Files/3_XML_Files/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    3. Treball amb Arxius XML
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../UD1_Files/4_JSON_Files/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    4. Treball amb Arxius JSON
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../UD1_Files/5_Extra_Formats/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    5. Altres formats de Fitxers
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Unitat 2. Connectors
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Unitat 2. Connectors
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../UD2_Connectors/1_Object_relational_impedance_mismatch/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    1. Desfase objecte-relacional
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../UD2_Connectors/2_Connectors/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2. Connectors
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../UD2_Connectors/3_Connecting/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    3. Connectant-se a la base de dades
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../UD2_Connectors/4_Resultset/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    4. Resultats de les consultes
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../UD2_Connectors/5_Metadata/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    5. Metadades
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../UD2_Connectors/6_CRUD/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    6. Operacions CRUD
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../UD2_Connectors/7_Row_to_Object/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    7. De les files als objectes
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Unitat 3. Hibernate
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Unitat 3. Hibernate
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../UD3_Hibernate/1_Mapping/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    1. Mapeig d'objectes
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../UD3_Hibernate/2_Hibernate/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2. Introduccio a Hibernate
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../UD3_Hibernate/3_Entities_Beans/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    3. Entitats
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../UD3_Hibernate/4_Relationships/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    4. Relacions
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../UD3_Hibernate/5_HQL/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    5. Consultes
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Unitat 4. Bases de Dades OO
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Unitat 4. Bases de Dades OO
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../UD4_BDOO/1_Introduction/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    1. Introduccio a les bases de dades OO
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../UD4_BDOO/2_ORDB/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2. Bases de dades Objecte-Relacionals
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../UD4_BDOO/3_OODB/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    3. Bases de dades Orientades a Objectes
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" checked>
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Unitat 5. Spring
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            Unitat 5. Spring
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../1_Data_Access_Services/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    1. Serveis d'Acces a Dades
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    2. Introducció a Spring
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    2. Introducció a Spring
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Taula de continguts">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Taula de continguts
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#1-spring-and-spring-boot" class="md-nav__link">
    <span class="md-ellipsis">
      1. Spring and Spring Boot
    </span>
  </a>
  
    <nav class="md-nav" aria-label="1. Spring and Spring Boot">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#11-moduls-principals-del-spring-framework" class="md-nav__link">
    <span class="md-ellipsis">
      1.1. Mòduls principals del Spring Framework
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-spring-vs-spring-boot" class="md-nav__link">
    <span class="md-ellipsis">
      2. Spring vs Spring Boot
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2. Spring vs Spring Boot">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#21-que-es-la-convencio-de-configuracio" class="md-nav__link">
    <span class="md-ellipsis">
      2.1. Què és la convenció de configuració?
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3-requisits-i-installacio" class="md-nav__link">
    <span class="md-ellipsis">
      3. Requisits i Instal·lació
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#4-primer-projecte-i-execucio" class="md-nav__link">
    <span class="md-ellipsis">
      4. Primer projecte i execució
    </span>
  </a>
  
    <nav class="md-nav" aria-label="4. Primer projecte i execució">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#41-initializr" class="md-nav__link">
    <span class="md-ellipsis">
      4.1. Initializr
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#42-primera-execucio" class="md-nav__link">
    <span class="md-ellipsis">
      4.2. Primera execució
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#43-el-fitxer-applicationproperties" class="md-nav__link">
    <span class="md-ellipsis">
      4.3. El fitxer application.properties
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#44-anotacio-springbootapplication" class="md-nav__link">
    <span class="md-ellipsis">
      4.4. Anotació @SpringBootApplication
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#5-mvc-amb-spring" class="md-nav__link">
    <span class="md-ellipsis">
      5. MVC amb Spring
    </span>
  </a>
  
    <nav class="md-nav" aria-label="5. MVC amb Spring">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#51-controladors" class="md-nav__link">
    <span class="md-ellipsis">
      5.1. Controladors
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#52-paquet-controllers" class="md-nav__link">
    <span class="md-ellipsis">
      5.2. Paquet controllers
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#53-sollicituds-i-parametres" class="md-nav__link">
    <span class="md-ellipsis">
      5.3. Sol·licituds i Paràmetres
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#54-logger" class="md-nav__link">
    <span class="md-ellipsis">
      5.4. Logger
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#55-parametres-multiples" class="md-nav__link">
    <span class="md-ellipsis">
      5.5. Paràmetres múltiples
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#56-sollicitud-post" class="md-nav__link">
    <span class="md-ellipsis">
      5.6. Sol·licitud POST
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#57-variables-en-el-cami" class="md-nav__link">
    <span class="md-ellipsis">
      5.7. Variables en el camí
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../3_API_Rest/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    3. Creació de APIs REST
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../4_Spring_Security/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    4. Seguretat
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../5_Spring_Hateoas/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    5. Spring Haetoas
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../6_Postman_Swagger/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    6. Test. Postman i Swagger
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" >
        
          
          <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Unitat 6. MongoDB
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            Unitat 6. MongoDB
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../UD6_MongoDB/1_NoSQL/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    1. Bases de dades NoSQL
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../UD6_MongoDB/2_MongoDB/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2. MongoDB
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../UD6_MongoDB/3_ShellOperations/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    3. Treballant amb MongoDB: Operacions bàsiques de shell
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../UD6_MongoDB/4_Queries/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    4. Consultese en Mongo
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../UD6_MongoDB/5_Mongo_Java/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    5. MongoDB i Java
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../UD6_MongoDB/6_Spring_MongoDB/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    6. Spring Data MongoDB i API REST
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../license/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Llicència
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Taula de continguts">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Taula de continguts
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#1-spring-and-spring-boot" class="md-nav__link">
    <span class="md-ellipsis">
      1. Spring and Spring Boot
    </span>
  </a>
  
    <nav class="md-nav" aria-label="1. Spring and Spring Boot">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#11-moduls-principals-del-spring-framework" class="md-nav__link">
    <span class="md-ellipsis">
      1.1. Mòduls principals del Spring Framework
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-spring-vs-spring-boot" class="md-nav__link">
    <span class="md-ellipsis">
      2. Spring vs Spring Boot
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2. Spring vs Spring Boot">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#21-que-es-la-convencio-de-configuracio" class="md-nav__link">
    <span class="md-ellipsis">
      2.1. Què és la convenció de configuració?
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3-requisits-i-installacio" class="md-nav__link">
    <span class="md-ellipsis">
      3. Requisits i Instal·lació
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#4-primer-projecte-i-execucio" class="md-nav__link">
    <span class="md-ellipsis">
      4. Primer projecte i execució
    </span>
  </a>
  
    <nav class="md-nav" aria-label="4. Primer projecte i execució">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#41-initializr" class="md-nav__link">
    <span class="md-ellipsis">
      4.1. Initializr
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#42-primera-execucio" class="md-nav__link">
    <span class="md-ellipsis">
      4.2. Primera execució
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#43-el-fitxer-applicationproperties" class="md-nav__link">
    <span class="md-ellipsis">
      4.3. El fitxer application.properties
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#44-anotacio-springbootapplication" class="md-nav__link">
    <span class="md-ellipsis">
      4.4. Anotació @SpringBootApplication
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#5-mvc-amb-spring" class="md-nav__link">
    <span class="md-ellipsis">
      5. MVC amb Spring
    </span>
  </a>
  
    <nav class="md-nav" aria-label="5. MVC amb Spring">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#51-controladors" class="md-nav__link">
    <span class="md-ellipsis">
      5.1. Controladors
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#52-paquet-controllers" class="md-nav__link">
    <span class="md-ellipsis">
      5.2. Paquet controllers
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#53-sollicituds-i-parametres" class="md-nav__link">
    <span class="md-ellipsis">
      5.3. Sol·licituds i Paràmetres
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#54-logger" class="md-nav__link">
    <span class="md-ellipsis">
      5.4. Logger
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#55-parametres-multiples" class="md-nav__link">
    <span class="md-ellipsis">
      5.5. Paràmetres múltiples
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#56-sollicitud-post" class="md-nav__link">
    <span class="md-ellipsis">
      5.6. Sol·licitud POST
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#57-variables-en-el-cami" class="md-nav__link">
    <span class="md-ellipsis">
      5.7. Variables en el camí
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  <h1>2. Introducció a Spring</h1>

<h2 id="1-spring-and-spring-boot">1. Spring and Spring Boot</h2>
<p>El Spring Framework simplifica el desenvolupament d'aplicacions Java, independentment de si són aplicacions web ordinàries o aplicacions web fora de línia. Els seus majors avantatges són un codi font més simplificat i menys dificultat en els ajustos. Per oferir aquestes comoditats al programador, el framework es basa en els següents principis:</p>
<ul>
<li>
<p><strong>Injecció de dependències</strong> (DI): tècnica o patró de disseny utilitzat com una de les formes d'inversió de control (IOC) per promoure un acoblament feble. És a dir, quan una classe necessita una altra classe (dependència), en lloc de crear l'objecte dins de la classe mateixa, Spring el subministra o l'injecta. Aquesta forma d'IOC segueix el principi de Hollywood (no ens truquis, ja et trucarem) en què l'aplicació pren el control en lloc del codi, proporcionant els següents beneficis:</p>
<ul>
<li>Proporciona modularitat.</li>
<li>Escalabilitat de l'aplicació sense necessitat de modificar les classes.</li>
<li>Evita la dependència entre classes.</li>
</ul>
</li>
<li>
<p>Desenvolupament senzill amb <strong>POJOs</strong> (Plain Old Java Objects).</p>
</li>
<li>Minimitza el codi boilerplate.</li>
<li>Simplifica l'accés a les dades gràcies a l'ORM (<strong>Object Relational Mapping</strong>).</li>
<li><strong>Programació Orientada a Aspectes</strong> (AOP): Permet una modularització molt més alta per fer una separació molt clara de les diferents tasques que cada classe ha de realitzar a la nostra aplicació.</li>
</ul>
<h3 id="11-moduls-principals-del-spring-framework">1.1. Mòduls principals del Spring Framework</h3>
<p>Gràcies a la seva estructura modular per al desenvolupament de les aplicacions més diverses en Java, Spring és l'elecció perfecta, ja que pots triar lliurement quins dels components necessites utilitzar per a les teves aplicacions i quins no. En l'arquitectura estàndard, els diferents mòduls es divideixen en sis categories principals:</p>
<p><center><img alt="SpringRuntime" src="../img/SpringRuntime.png" width="95%" /></center></p>
<ul>
<li>
<p><strong>Core Container</strong>: El contenidor principal proporciona els mòduls bàsics:</p>
<ul>
<li><strong>Core</strong> i <strong>Beans</strong> formen l'esquelet del framework, contenint la funció d'injecció de dependències i donant suport als objectes POJO. Cal aclarir que un Bean és un POJO, tot i que té algunes característiques addicionals.</li>
<li><strong>Context</strong> hereta les seves característiques del mòdul Beans i es pot complementar amb funcions per a la internacionalització o la càrrega de recursos. A més, dóna suport a característiques de Java Enterprise com EJB i JMX (Java Management Extensions). Context-support facilita la integració de biblioteques d'altres proveïdors en Spring.</li>
<li>Spring-expression conté el Spring Expression Language (<em>SPeL</em>), una extensió del Unified Expression Language de l'especificació JSP-2.1 (Java Server Pages).</li>
</ul>
</li>
<li>
<p><strong>AOP</strong> i instrumentació: Per permetre la programació orientada a aspectes, el Spring Framework conté el mòdul spring-aop. El component spring-instrument proporciona suport per a la implementació de càrrega d'objectes i classes de manipulació per al seu ús en alguns servidors.</p>
</li>
<li><strong>Missatgeria</strong>: Per servir com a base per a aplicacions basades en missatges, el Spring Framework es basa en algunes de les funcions d'encriptació del projecte Spring Integration, com <em>Message</em>, <em>MessageChannel</em> o <em>MessageHandler</em>. Aquest mòdul té el nom de spring-messaging.</li>
<li>
<p><strong>Accés a Dades/Integració</strong>: Els mòduls d'aquesta categoria estan dissenyats per donar a les aplicacions Java les eines per interactuar amb altres aplicacions, així com controlar l'accés a les dades.</p>
<ul>
<li><em>spring-jdbc</em> proporciona una capa d'abstracció que defineix la manera com un client accedeix a la base de dades i estalvia la codificació complicada típica de JDBC.</li>
<li><em>spring-orm</em> ofereix capes d'integració per accedir a bases de dades relacionals en interfícies ORM populars.</li>
<li><em>spring-tx</em> (dóna suport a la gestió de transaccions programàtiques per a totes les classes i POJOs).</li>
<li><em>spring-oxm</em> (capa d'abstracció per al mapatge d'objectes o XML).</li>
<li><em>spring-jms</em>, un mòdul amb funcions per a la producció i processament de missatges.</li>
</ul>
</li>
<li>
<p><strong>Web</strong>: en aquesta categoria es troben els mòduls específics per a aplicacions web: spring-web, spring-webmvc i spring-websocket. A més, aquesta aplicació Java ha afegit funcions d'integració típiques orientades al web com una funció de càrrega multipart o un client HTTP. El mòdul spring-webmvc també és conegut com a web servlet i és el que conté les implementacions de Spring per a l'execució del patró d'arquitectura model-vista-controlador (MVC) i serveis web REST.</p>
</li>
<li>Test: el mòdul spring-test permet comprovar la funcionalitat dels components de la teva aplicació Java. Així, amb l'ajuda de frameworks addicionals com JUnit o TestNG, pots realitzar proves unitàries (centrades en un sol component) així com proves d'integració.</li>
</ul>
<h2 id="2-spring-vs-spring-boot">2. Spring vs Spring Boot</h2>
<p>Spring Boot va aparèixer fa uns anys amb la idea de complementar Spring, és a dir, afegir a Spring, no amb la idea de substituir-lo. Com es pot interpretar a la imatge següent, Spring Boot realment funciona amb Spring per sota, però d'una manera més fàcil.</p>
<p><center><img alt="SpringvsBoot" src="../img/SpringvsBoot.png" width="75%" /></center></p>
<p>Podríem definir Spring Boot com un accelerador per a la creació de projectes Spring, que es basa principalment en el concepte de convenció abans de la configuració. Una altra manera de definir Spring Boot podria ser com un accelerador de creació de projectes Spring. Per tant, l'objectiu és crear projectes Spring, però d'una manera més àgil, a través d'una sèrie de convencions que prevalen sobre la configuració. Estalviant-nos haver de perdre temps fent configuracions pesades en fitxers.</p>
<p>Cal destacar que Spring Boot no es considera un Framework com a tal, en canvi, Spring sí que té el privilegi de categoritzar-se com a tal. Amb Spring Boot, podem fer el mateix que amb Spring. Però d'una manera més ràpida que si desenvolupem exclusivament amb Spring només. Però amb tots dos, podríem tenir el mateix desenvolupament, tot i que la diferència entre els dos seria el temps invertit.</p>
<p><center><img alt="SpringBoot" src="../img/SpringBoot.png" width="95%" /></center></p>
<p>Per explicar les diferències entre els dos, és essencial introduir el concepte de convenció de configuració, que juga un paper tan important en el camp de l'enginyeria de programari.</p>
<h3 id="21-que-es-la-convencio-de-configuracio">2.1. Què és la convenció de configuració?</h3>
<p>Aquest principi especifica/detalla una sèrie de convencions (conjunt de regles) que estaran per sobre de la configuració, tret que s'especifiqui el contrari. És a dir, s'aplicaran per defecte si no especifiquem el contrari.</p>
<p>Un exemple d'una convenció abans de la configuració podria ser quan creem una aplicació MVC amb Spring, hem de dur a terme moltes configuracions, incloent-hi el port. D'altra banda, si creem l'aplicació utilitzant Spring Boot, gràcies a la convenció de configuració, el port per defecte de l'aplicació en iniciar-la serà 8080. Però si volem canviar-lo, només hem de modificar un fitxer i afegir una sola instrucció on detallarem el port, per exemple, 8888. D'aquesta manera, realitzarem un desenvolupament més àgil, ja que evitarem haver de fer configuracions, excepte que vulguem modificar la configuració d'alguna convenció.</p>
<h2 id="3-requisits-i-installacio">3. Requisits i Instal·lació</h2>
<p>Spring funciona amb moltes tecnologies integrades (a continuació), així que aconsellem tenir el següent per assegurar-nos que tot funcioni correctament. Els requisits són:</p>
<ul>
<li>Java instal·lat, és aconsellable tenir la versió 8, degut a la seva estabilitat. I que Spring no suporta algunes de les versions més noves de Java.</li>
<li>Apache Maven instal·lat.</li>
<li>Un IDE compatible (en aquest cas serà <strong>Spring Tool Suite</strong>).</li>
</ul>
<p><strong>Spring Tool Suite 4</strong>, que és el proporcionat des del lloc web de Pivotal (pàgina oficial dels creadors i mantenidors de Spring). Es pot descarregar des de <a href="https://spring.io/tools">https://spring.io/tools</a>.</p>
<h2 id="4-primer-projecte-i-execucio">4. Primer projecte i execució</h2>
<p>Per crear un projecte Spring, ho podem fer de dues maneres:</p>
<ul>
<li>Crear un projecte des de <em>Spring Boot Initializer</em>, l'eina web proporcionada per Pivotal aquí <a href="https://start.spring.io">https://start.spring.io</a>. Aquest assistent genera un fitxer zip amb l'estructura del projecte maven. Necessitem importar aquest fitxer zip al nostre IDE per començar a programar.</li>
<li>Crear el projecte des de l'IDE utilitzant l'<em>eina de línia de comandes</em> (CLI), en el nostre cas l'IDE escollit serà Spring Tool Suite 4. No necessitem passos addicionals per començar a programar.</li>
</ul>
<h3 id="41-initializr">4.1. Initializr</h3>
<p>Visitem <a href="https://start.spring.io">https://start.spring.io</a> i omplim el formulari:</p>
<p><center><img alt="Initializr" src="../img/Initializr.png" width="95%" /></center></p>
<p>A la part de dependències, hauríem d'afegir els aspectes del nostre programa. Inicialment aplicació web, però podríem afegir Lombok, Thymeleaf i altres aspectes.</p>
<p>Aquí trobareu diverses captures de pantalla amb el procés. Des de STS, creeu un nou projecte:</p>
<p><center><img alt="new_1" src="../img/new_1.png" width="95%" /></center></p>
<p>I seleccioneu un <em>Spring starter project</em>:</p>
<p><center><img alt="new_2" src="../img/new_2.png" width="95%" /></center></p>
<p>Seleccioneu un projecte maven, la versió de Java instal·lada i escriviu informació sobre la versió de l'artifact i altres dades:</p>
<p><center><img alt="new_3" src="../img/new_3.png" width="95%" /></center></p>
<p>I finalment seleccioneu les dependències. En el nostre projecte inicial, seleccioneu Spring web.</p>
<p><center><img alt="new_4" src="../img/new_4.png" width="95%" /></center></p>
<p>I quan el procés acabi, trobareu una estructura de projecte amb un <em>pom.xml</em> configurat.</p>
<p><center><img alt="new_5" src="../img/new_5.png" width="95%" /></center></p>
<p>i l'estructura:</p>
<p><center><img alt="new_6" src="../img/new_6.png" width="65%" /></center></p>
<h3 id="42-primera-execucio">4.2. Primera execució</h3>
<p>Vegem quins fitxers s'han creat en el nostre projecte. Com podeu veure, només una classe amb una funció principal:</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Java</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-0-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-0-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-0-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-0-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-0-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-0-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-0-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-0-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-0-10">10</a></span>
<span class="normal"><a href="#__codelineno-0-11">11</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1"></a><span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.boot.SpringApplication</span><span class="p">;</span>
<a id="__codelineno-0-2" name="__codelineno-0-2"></a><span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.boot.autoconfigure.SpringBootApplication</span><span class="p">;</span>
<a id="__codelineno-0-3" name="__codelineno-0-3"></a>
<a id="__codelineno-0-4" name="__codelineno-0-4"></a><span class="nd">@SpringBootApplication</span>
<a id="__codelineno-0-5" name="__codelineno-0-5"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">HelloSpringApplication</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-0-6" name="__codelineno-0-6"></a>
<a id="__codelineno-0-7" name="__codelineno-0-7"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-0-8" name="__codelineno-0-8"></a><span class="w">        </span><span class="n">SpringApplication</span><span class="p">.</span><span class="na">run</span><span class="p">(</span><span class="n">HelloSpringApplication</span><span class="p">.</span><span class="na">class</span><span class="p">,</span><span class="w"> </span><span class="n">args</span><span class="p">);</span>
<a id="__codelineno-0-9" name="__codelineno-0-9"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-0-10" name="__codelineno-0-10"></a>
<a id="__codelineno-0-11" name="__codelineno-0-11"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>S'executarà una <code>SpringApplication</code>, de la mateixa manera que s'executa un <code>Thread</code>. Aquesta classe inicialitza i llança l'aplicació Spring, amb arguments, si n'hi ha.</p>
<div class="admonition tip">
<p class="admonition-title">Consell</p>
<p>Spring com a aplicació web, no interactua amb l'usuari, i esperarà i servirà a molts clients. Per aquesta raó, no és una bona idea fer programes interactius amb usuaris.</p>
</div>
<p>Per executar la nostra aplicació Spring:</p>
<p><center><img alt="run_1" src="../img/run_1.png" width="95%" /></center></p>
<p>I apareixerà a la consola un registre similar a:</p>
<p><center><img alt="run_2" src="../img/run_2.png" width="95%" /></center></p>
<p>La primera cosa important que heu de veure és el port al qual el servidor Tomcat està escoltant. Per defecte és el port 8080:</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-1-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1"></a>...<span class="w"> </span>Tomcat<span class="w"> </span>started<span class="w"> </span>on<span class="w"> </span>port<span class="o">(</span>s<span class="o">)</span>:<span class="w"> </span><span class="m">8080</span><span class="w"> </span><span class="o">(</span>http<span class="o">)</span><span class="w"> </span>with<span class="w"> </span>context<span class="w"> </span>path<span class="w"> </span><span class="s1">&#39;&#39;</span>
</code></pre></div></td></tr></table></div>
<p>I quan aturem el nostre programa:</p>
<p><center><img alt="run_3" src="../img/run_3.png" width="95%" /></center></p>
<div class="admonition tip">
<p class="admonition-title">Consell</p>
<p>Recordeu que és molt útil llegir tots aquests missatges, especialment quan alguna cosa no funciona com s'espera</p>
</div>
<p>Per mostrar que el nostre programa funciona correctament, necessitem provar el port específic, i després, anar al nostre navegador i escriure <code>http://localhost:8080</code>. </p>
<p><center><img alt="Spring Running" src="../img/Spring_Running.png" width="95%" /></center></p>
<p>El missatge d'error que obtenim <code>Whitelabel Error Page</code>, no és un error en absolut, ja que no hem programat cap controlador, és a dir, el servidor està funcionant, però no està servint res.</p>
<h3 id="43-el-fitxer-applicationproperties">4.3. El fitxer <code>application.properties</code></h3>
<p>Aquest fitxer conté moltes configuracions útils que establirem al llarg del nostre cicle de desenvolupament. Les estudiarem a mesura que apareguin, però totes les configuracions que vam establir al fitxer <code>hibernate.cfg.xml</code> a la unitat 3 es configuraran en aquest fitxer.</p>
<p><center><img alt="Application properties" src="../img/app.props.png" width="60%" /></center></p>
<p>Aquest fitxer, com tots els fitxers de propietats, té una estructura de parella atribut-valor. El primer valor important és canviar el port que escolta el nostre servidor. Aquest fitxer es troba a la carpeta <code>src/main/resources</code>. Hem d'afegir, per exemple:</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-2-1">1</a></span>
<span class="normal"><a href="#__codelineno-2-2">2</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1"></a><span class="c1"># port d&#39;escolta</span>
<a id="__codelineno-2-2" name="__codelineno-2-2"></a>server.port<span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">8090</span>
</code></pre></div></td></tr></table></div>
<p>Si tornem a executar la nostra aplicació, hem de canviar el port al navegador per accedir al nostre servidor.</p>
<div class="admonition tip">
<p class="admonition-title">Consell</p>
<p>Podeu veure (gairebé) totes les propietats visitant <a href="https://docs.spring.io/spring-boot/docs/current/reference/html/application-properties.html">aquesta pàgina web</a></p>
</div>
<p>Podríem afegir qualsevol valor que vulguem utilitzar, com ara constants per utilitzar en els nostres programes. Després podem carregar-lo en els nostres programes. Per exemple:</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-3-1">1</a></span>
<span class="normal"><a href="#__codelineno-3-2">2</a></span>
<span class="normal"><a href="#__codelineno-3-3">3</a></span>
<span class="normal"><a href="#__codelineno-3-4">4</a></span>
<span class="normal"><a href="#__codelineno-3-5">5</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1"></a><span class="c1"># App name</span>
<a id="__codelineno-3-2" name="__codelineno-3-2"></a>app.name<span class="o">=</span>First<span class="w"> </span>spring<span class="w"> </span>app
<a id="__codelineno-3-3" name="__codelineno-3-3"></a>
<a id="__codelineno-3-4" name="__codelineno-3-4"></a><span class="c1">#Developer name</span>
<a id="__codelineno-3-5" name="__codelineno-3-5"></a>developer.name<span class="o">=</span>Joan<span class="w"> </span>Gerard<span class="w"> </span>Camarena
</code></pre></div></td></tr></table></div>
<p>per carregar-ho als nostres programes, necessitem utilitzar l'anotació <code>@Value</code>:</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Java</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-4-1">1</a></span>
<span class="normal"><a href="#__codelineno-4-2">2</a></span>
<span class="normal"><a href="#__codelineno-4-3">3</a></span>
<span class="normal"><a href="#__codelineno-4-4">4</a></span>
<span class="normal"><a href="#__codelineno-4-5">5</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1"></a><span class="nd">@Value</span><span class="p">(</span><span class="s">&quot;${app.name}&quot;</span><span class="p">)</span>
<a id="__codelineno-4-2" name="__codelineno-4-2"></a><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">appName</span><span class="p">;</span>
<a id="__codelineno-4-3" name="__codelineno-4-3"></a>
<a id="__codelineno-4-4" name="__codelineno-4-4"></a><span class="nd">@Value</span><span class="p">(</span><span class="s">&quot;${developer.name}&quot;</span><span class="p">)</span>
<a id="__codelineno-4-5" name="__codelineno-4-5"></a><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">devName</span><span class="p">;</span>
</code></pre></div></td></tr></table></div>
<h3 id="44-anotacio-springbootapplication">4.4. Anotació <code>@SpringBootApplication</code></h3>
<p>A Spring Boot, és molt comú aplicar múltiples anotacions a la classe principal. Però comunament, la majoria dels desenvolupadors principalment apliquen 3 anotacions.</p>
<ul>
<li><code>@Configuration</code>: Disponible des de la versió 3 de Spring, ens ofereix la possibilitat de fer una anotació que s'encarregarà de definir la classe que la posseeix com una classe de configuració. Aquesta configuració per al framework Spring es basarà en anotacions. I no com en els seus orígens, que es basava en XML, cosa que ho feia més complex. Un altre propòsit d'aquesta anotació serà permetre la injecció de dependències.</li>
<li><code>@EnableAutoConfiguration</code>: La configuració automàtica de Spring Boot intenta configurar automàticament la teva aplicació Spring en funció de qualsevol dependència de jar que hagis afegit. Si, per exemple, si poses un <strong>HSQLDB</strong> (sistema de gestió de bases de dades) al teu classpath, i no has configurat manualment cap bean de connexió a la base de dades, Spring Boot configura automàticament una base de dades en memòria.</li>
<li><code>@ComponentScan</code>: S'utilitza juntament amb <code>@Configuration</code> per dir a Spring on buscar els components, i serà dins del paquet que hem anotat. Només havent d'escriure-ho una vegada, podent fer que tots els paquets siguin fills del paquet de la classe pare (la que conté el main). Bàsicament, això diu a Spring on ha de buscar tots els components.</li>
</ul>
<p>Per poder utilitzar aquest paquet de tres anotacions, Spring Boot ens ofereix <code>@SpringBootApplication</code> com la unió de les tres anotacions explicades anteriorment.</p>
<h2 id="5-mvc-amb-spring">5. MVC amb Spring</h2>
<h3 id="51-controladors">5.1. Controladors</h3>
<p>Un controlador és responsable de respondre a esdeveniments. Normalment, aquests esdeveniments són accions (més tècnicament conegudes com a sol·licituds) que solen ser realitzades per l'usuari, tot i que també poden ser sol·licituds més automatitzades com API, pàgines frontals Ajax, etc.</p>
<p>En un context de la vida real, un controlador és com un cambrer; Ell o ella està esperant darrere de la barra fins que arribi un client. El client demana una coca-cola, i el cambrer, si en té, la servirà. Després arriba un altre client, i demana un cafè, i llavors el cambrer el serveix. Un altre client arriba, i demana un te verd, i el cambrer diu que no el pot servir, perquè no en té. Una vegada i una altra... El cambrer servirà tot el que el client vulgui, si pot.</p>
<p><center><img alt="Controller" src="../img/Controller.png" width="95%" /></center></p>
<p>Tornant a Spring, hem d'afegir al nostre programa un mòdul que funcioni com un controlador, escoltant totes les sol·licituds dels clients, i responent (si pot) amb les dades que el client sol·licita.</p>
<p><center><img alt="MVC_2" src="../img/MVC_2.png" width="95%" /></center></p>
<p>Recordeu l'error en la primera execució de Spring: l'aplicació Spring funciona bé, però encara no tenim un controlador. Som-hi.</p>
<h3 id="52-paquet-controllers">5.2. Paquet <code>controllers</code></h3>
<p>Anem a crear un controlador, però primer, hem de crear un paquet que contingui aquest controlador. Abans parlàvem de l'anotació <code>@SpringBootApplication</code> que vam dir que era equivalent a tenir 3 anotacions. Una d'elles era <code>@ComponentScan</code>. Si no volem haver de dir-li que escanegi diversos paquets (que normalment és la millor idea), normalment posem tota l'estructura de paquets dins del paquet <code>pare</code>, que serà el paquet on tenim el main.</p>
<p>Per fer això, feu clic dret sobre el paquet que conté el main. D'aquesta manera, quan anem a posar el nom directament ens apareixerà el com.example i només haurem d'afegir un <code>.</code> i el nom del paquet fill. Si no, hauríem d'escriure el nom complet del paquet. Com podeu veure, el paquet blanc ens indica que és un paquet buit en lloc del paquet marró.</p>
<p><center><img alt="Controller_1" src="../img/Controller_1.png" width="65%" /></center></p>
<p>Anem a crear una classe senzilla que controli l'índex de la nostra aplicació. Per aquesta raó, hem de nomenar la nostra classe com <code>indexController.java</code>. Recordeu que índex es refereix al domini principal del nostre servidor/app.</p>
<div class="admonition tip">
<p class="admonition-title">Consell</p>
<p>És una bona pràctica establir noms de classes seguint regles senzilles per entendre el comportament de la classe. Així, una classe anomenada <code>clientController</code> és el controlador que mapatge informació sobre <code>Client</code>, i <code>filmController.java</code> tracta sobre <code>Films</code>.</p>
</div>
<p>Un cop la nostra classe ha estat creada, dins del paquet controlador, l'hem de configurar. Vegem un exemple de <code>indexController.java</code>:</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Java</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-5-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-5-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-5-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-5-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-5-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-5-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-5-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-5-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-5-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-5-10">10</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1"></a><span class="nd">@Controller</span>
<a id="__codelineno-5-2" name="__codelineno-5-2"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">indexController</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-5-3" name="__codelineno-5-3"></a>
<a id="__codelineno-5-4" name="__codelineno-5-4"></a><span class="w">    </span><span class="nd">@GetMapping</span><span class="p">(</span><span class="s">&quot;/&quot;</span><span class="p">)</span>
<a id="__codelineno-5-5" name="__codelineno-5-5"></a><span class="w">    </span><span class="nd">@ResponseBody</span>
<a id="__codelineno-5-6" name="__codelineno-5-6"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="nf">helloWorld</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-5-7" name="__codelineno-5-7"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="s">&quot;Hello from Spring&quot;</span><span class="p">;</span>
<a id="__codelineno-5-8" name="__codelineno-5-8"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-5-9" name="__codelineno-5-9"></a>
<a id="__codelineno-5-10" name="__codelineno-5-10"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>Mireu les nostres anotacions:</p>
<ul>
<li><code>@Controller</code> → diu a Spring que aquesta classe és un controlador. És una especialització de <code>@Component</code>, i com que Spring explora tot el classpath, es detecta automàticament.</li>
<li><code>@GetMapping("/")</code> → és el controlador. Definim un camí (<code>"/"</code>) al nostre servidor, i escoltem el mètode <code>GET</code>. En parlarem més endavant.</li>
<li><code>@ResponseBody</code> → diu al controlador que serialitzi el valor de retorn (una cadena en el nostre exemple) a JSON i l'enviï a través de <code>http_response</code> al client que crida el controlador.</li>
</ul>
<p>Ara, si intentem recarregar la pàgina al navegador, en lloc d'un missatge d'error, obtindrem el valor retornat pel controlador:</p>
<div class="tabbed-set tabbed-alternate" data-tabs="1:2"><input checked="checked" id="__tabbed_1_1" name="__tabbed_1" type="radio" /><input id="__tabbed_1_2" name="__tabbed_1" type="radio" /><div class="tabbed-labels"><label for="__tabbed_1_1">Abans del controlador</label><label for="__tabbed_1_2">Després del controlador</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p><center><img alt="Spring_Running" src="../img/Spring_Running.png" width="95%" /></center></p>
</div>
<div class="tabbed-block">
<p><center><img alt="Controller_2" src="../img/Controller_2.png" width="95%" /></center></p>
</div>
</div>
</div>
<p>Una altra manera d'obtenir el mateix resultat seria:</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Java</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-6-1">1</a></span>
<span class="normal"><a href="#__codelineno-6-2">2</a></span>
<span class="normal"><a href="#__codelineno-6-3">3</a></span>
<span class="normal"><a href="#__codelineno-6-4">4</a></span>
<span class="normal"><a href="#__codelineno-6-5">5</a></span>
<span class="normal"><a href="#__codelineno-6-6">6</a></span>
<span class="normal"><a href="#__codelineno-6-7">7</a></span>
<span class="normal"><a href="#__codelineno-6-8">8</a></span>
<span class="normal"><a href="#__codelineno-6-9">9</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1"></a><span class="nd">@RestController</span>
<a id="__codelineno-6-2" name="__codelineno-6-2"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">indexController</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-6-3" name="__codelineno-6-3"></a>
<a id="__codelineno-6-4" name="__codelineno-6-4"></a><span class="w">    </span><span class="nd">@GetMapping</span><span class="p">(</span><span class="s">&quot;/&quot;</span><span class="p">)</span>
<a id="__codelineno-6-5" name="__codelineno-6-5"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="nf">helloWorld</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-6-6" name="__codelineno-6-6"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="s">&quot;Hello from Spring&quot;</span><span class="p">;</span>
<a id="__codelineno-6-7" name="__codelineno-6-7"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-6-8" name="__codelineno-6-8"></a>
<a id="__codelineno-6-9" name="__codelineno-6-9"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>on:</p>
<ul>
<li><code>@RestController</code> → indica que en aquesta classe tots els mètodes inclouen l'anotació <code>@ResponseBody</code>. Tingueu cura, ja que tots els mètodes retornaran un objecte JSON, i en alguns casos (quan enviem dades a vistes en un altre format), pot ser una mala idea.</li>
</ul>
<h3 id="53-sollicituds-i-parametres">5.3. Sol·licituds i Paràmetres</h3>
<div class="admonition info">
<p class="admonition-title">Atenció</p>
<p>Per provar la nostra sol·licitud, a partir d'ara utilitzarem POSTMAN <a href="https://www.postman.com/downloads/">https://www.postman.com/downloads/</a>. Hi ha un apèndix sobre l'ús de postman.</p>
</div>
<p>Afegim una mica d'intel·ligència a una ruta del controlador, donant-li una mica de dinamisme a través del pas de paràmetres. Aquests paràmetres seran acceptats gràcies a l'anotació <code>@RequestParam</code>.</p>
<p>El nombre de paràmetres que rebrem serà igual al nombre de paràmetres que hem definit dins de l'anotació <code>@RequestParam</code> del mètode de la ruta del controlador, de la següent manera:</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Java</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-7-1">1</a></span>
<span class="normal"><a href="#__codelineno-7-2">2</a></span>
<span class="normal"><a href="#__codelineno-7-3">3</a></span>
<span class="normal"><a href="#__codelineno-7-4">4</a></span>
<span class="normal"><a href="#__codelineno-7-5">5</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1"></a><span class="nd">@GetMapping</span><span class="p">(</span><span class="s">&quot;/hola&quot;</span><span class="p">)</span>
<a id="__codelineno-7-2" name="__codelineno-7-2"></a><span class="w">    </span><span class="nd">@ResponseBody</span>
<a id="__codelineno-7-3" name="__codelineno-7-3"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="nf">hola</span><span class="p">(</span><span class="nd">@RequestParam</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">name</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-7-4" name="__codelineno-7-4"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="s">&quot;Hola &quot;</span><span class="o">+</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="o">+</span><span class="s">&quot; desde Spring !!!&quot;</span><span class="p">;</span>
<a id="__codelineno-7-5" name="__codelineno-7-5"></a><span class="w">    </span><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>Això significa que una sol·licitud de <code>GET /hola</code> necessitarà un paràmetre (<code>name</code>) amb el seu valor. Per exemple <code>http://localhost:9090/hola?name=Joange</code>.</p>
<p>Tingueu en compte que si no afegim el paràmetre, la sol·licitud serà incorrecta. Podríem solucionar-ho, establint aquest paràmetre com a no requerit i un valor per defecte, de la següent manera:</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Java</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-8-1">1</a></span>
<span class="normal"><a href="#__codelineno-8-2">2</a></span>
<span class="normal"><a href="#__codelineno-8-3">3</a></span>
<span class="normal"><a href="#__codelineno-8-4">4</a></span>
<span class="normal"><a href="#__codelineno-8-5">5</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1"></a><span class="nd">@GetMapping</span><span class="p">(</span><span class="s">&quot;/hola&quot;</span><span class="p">)</span>
<a id="__codelineno-8-2" name="__codelineno-8-2"></a><span class="nd">@ResponseBody</span>
<a id="__codelineno-8-3" name="__codelineno-8-3"></a><span class="kd">public</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="nf">hola</span><span class="p">(</span><span class="nd">@RequestParam</span><span class="p">(</span><span class="n">required</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="n">defaultValue</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;desconocido&quot;</span><span class="p">)</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">name</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-8-4" name="__codelineno-8-4"></a><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="s">&quot;Hola &quot;</span><span class="o">+</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="o">+</span><span class="s">&quot; desde Spring !!!&quot;</span><span class="p">;</span>
<a id="__codelineno-8-5" name="__codelineno-8-5"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<h3 id="54-logger">5.4. Logger</h3>
<p>Una bona idea també és utilitzar <code>Logger</code> per mostrar què està passant al nostre servidor. Podem utilitzar-lo com suggerim:</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Java</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-9-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-9-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-9-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-9-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-9-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-9-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-9-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-9-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-9-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-9-10">10</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-9-1" name="__codelineno-9-1"></a><span class="c1">// set up a Logger to my app</span>
<a id="__codelineno-9-2" name="__codelineno-9-2"></a><span class="kd">private</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">Logger</span><span class="w"> </span><span class="n">myLog</span><span class="o">=</span><span class="n">LoggerFactory</span><span class="p">.</span><span class="na">getLogger</span><span class="p">(</span><span class="n">HelloSpringApplication</span><span class="p">.</span><span class="na">class</span><span class="p">);</span>
<a id="__codelineno-9-3" name="__codelineno-9-3"></a>
<a id="__codelineno-9-4" name="__codelineno-9-4"></a><span class="c1">// check specific situations</span>
<a id="__codelineno-9-5" name="__codelineno-9-5"></a><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">name</span><span class="o">==</span><span class="kc">null</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-9-6" name="__codelineno-9-6"></a><span class="w">    </span><span class="n">myLog</span><span class="p">.</span><span class="na">warn</span><span class="p">(</span><span class="s">&quot;Name parameter does not exists&quot;</span><span class="p">);</span>
<a id="__codelineno-9-7" name="__codelineno-9-7"></a><span class="p">}</span>
<a id="__codelineno-9-8" name="__codelineno-9-8"></a><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-9-9" name="__codelineno-9-9"></a><span class="w">    </span><span class="n">myLog</span><span class="p">.</span><span class="na">info</span><span class="p">(</span><span class="n">name</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&quot; is here&quot;</span><span class="p">);</span>
<a id="__codelineno-9-10" name="__codelineno-9-10"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p><code>Logger</code> ens ofereix mostrar cada tipus de missatge:</p>
<ul>
<li><code>void error(String msg)</code></li>
<li><code>void warn(String msg)</code></li>
<li><code>void info(String msg)</code></li>
</ul>
<h3 id="55-parametres-multiples">5.5. Paràmetres múltiples</h3>
<p>Anem a estudiar com obtenir diversos paràmetres, tot i que no es recomana més de tres o quatre, perquè els camins augmenten molt, i hi ha millors mètodes per passar dades al servidor, com objectes en la sol·licitud BODY des de formularis o dades dins dels camins. Un exemple clàssic és el següent:</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Java</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-10-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-10-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-10-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-10-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-10-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-10-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-10-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-10-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-10-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-10-10">10</a></span>
<span class="normal"><a href="#__codelineno-10-11">11</a></span>
<span class="normal"><a href="#__codelineno-10-12">12</a></span>
<span class="normal"><a href="#__codelineno-10-13">13</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-10-1" name="__codelineno-10-1"></a><span class="nd">@Autowired</span>
<a id="__codelineno-10-2" name="__codelineno-10-2"></a><span class="kd">private</span><span class="w"> </span><span class="n">HttpServletRequest</span><span class="w"> </span><span class="n">context</span><span class="p">;</span>
<a id="__codelineno-10-3" name="__codelineno-10-3"></a>
<a id="__codelineno-10-4" name="__codelineno-10-4"></a><span class="nd">@GetMapping</span><span class="p">(</span><span class="s">&quot;/born&quot;</span><span class="p">)</span>
<a id="__codelineno-10-5" name="__codelineno-10-5"></a><span class="nd">@ResponseBody</span>
<a id="__codelineno-10-6" name="__codelineno-10-6"></a><span class="kd">public</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="nf">born</span><span class="p">(</span>
<a id="__codelineno-10-7" name="__codelineno-10-7"></a><span class="w">    </span><span class="nd">@RequestParam</span><span class="p">(</span><span class="n">required</span><span class="o">=</span><span class="kc">true</span><span class="p">,</span><span class="n">defaultValue</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;unknown&quot;</span><span class="p">)</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">name</span><span class="p">,</span>
<a id="__codelineno-10-8" name="__codelineno-10-8"></a><span class="w">    </span><span class="nd">@RequestParam</span><span class="p">(</span><span class="n">required</span><span class="o">=</span><span class="kc">true</span><span class="p">,</span><span class="n">defaultValue</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;1970&quot;</span><span class="p">)</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">year</span><span class="w">         </span>
<a id="__codelineno-10-9" name="__codelineno-10-9"></a><span class="w">    </span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-10-10" name="__codelineno-10-10"></a><span class="w">  </span><span class="kt">int</span><span class="w"> </span><span class="n">currentYear</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Calendar</span><span class="p">.</span><span class="na">getInstance</span><span class="p">().</span><span class="na">get</span><span class="p">(</span><span class="n">Calendar</span><span class="p">.</span><span class="na">YEAR</span><span class="p">);</span>
<a id="__codelineno-10-11" name="__codelineno-10-11"></a><span class="w">  </span><span class="n">myLog</span><span class="p">.</span><span class="na">info</span><span class="p">(</span><span class="s">&quot;Request from -&gt; &quot;</span><span class="o">+</span><span class="n">context</span><span class="p">.</span><span class="na">getRemoteAddr</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&quot; Port-&gt;&quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">context</span><span class="p">.</span><span class="na">getRemotePort</span><span class="p">());</span>
<a id="__codelineno-10-12" name="__codelineno-10-12"></a><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="s">&quot;Hi &quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&quot; you have &quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="p">(</span><span class="n">currentYear</span><span class="o">-</span><span class="n">year</span><span class="p">);</span>
<a id="__codelineno-10-13" name="__codelineno-10-13"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>tingues en compte que:</p>
<ul>
<li>Tot i que els valors per defecte podrien ser enters o reals, els hem de definir com a cadenes.</li>
<li>La variable <code>HttpServletRequest</code> definida s'utilitza per obtenir informació addicional sobre la sol·licitud http rebuda.</li>
</ul>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p><code>@Autowired</code> és una de les anotacions més utilitzades. Aquesta anotació permet fer la injecció de dependències. Això significa que Spring buscarà una classe dins del context de l'aplicació que coincideixi amb el bean desitjat, crearà una nova instància i la injectarà dins del bean que posseeix la injecció.</p>
</div>
<h3 id="56-sollicitud-post">5.6. Sol·licitud POST</h3>
<p>Apart de GET, podem fer sol·licituds POST, PUT, DELETE i més al nostre servidor. Simplement hem de substituir <code>@GetMapping</code> per <code>@PostMapping</code>, amb la corresponent importació. De fet, com que són rutes diferents, fins i tot si es diuen igual, podrien estar al mateix fitxer sense cap problema.</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Java</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-11-1">1</a></span>
<span class="normal"><a href="#__codelineno-11-2">2</a></span>
<span class="normal"><a href="#__codelineno-11-3">3</a></span>
<span class="normal"><a href="#__codelineno-11-4">4</a></span>
<span class="normal"><a href="#__codelineno-11-5">5</a></span>
<span class="normal"><a href="#__codelineno-11-6">6</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-11-1" name="__codelineno-11-1"></a><span class="nd">@PostMapping</span><span class="p">(</span><span class="s">&quot;/born&quot;</span><span class="p">)</span>
<a id="__codelineno-11-2" name="__codelineno-11-2"></a><span class="nd">@ResponseBody</span>
<a id="__codelineno-11-3" name="__codelineno-11-3"></a><span class="kd">public</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="nf">post</span><span class="p">(</span>
<a id="__codelineno-11-4" name="__codelineno-11-4"></a><span class="w">    </span><span class="nd">@RequestParam</span><span class="p">(</span><span class="n">required</span><span class="o">=</span><span class="kc">true</span><span class="p">,</span><span class="n">defaultValue</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;unknown&quot;</span><span class="p">)</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">name</span><span class="p">,</span>
<a id="__codelineno-11-5" name="__codelineno-11-5"></a><span class="w">    </span><span class="nd">@RequestParam</span><span class="p">(</span><span class="n">required</span><span class="o">=</span><span class="kc">true</span><span class="p">,</span><span class="n">defaultValue</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;1970&quot;</span><span class="p">)</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">year</span><span class="w">         </span>
<a id="__codelineno-11-6" name="__codelineno-11-6"></a><span class="w">    </span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</code></pre></div></td></tr></table></div>
<p>Com que les sol·licituds POST solen ser cridades dins d'un formulari, és una bona idea establir el paràmetre a la secció del cos de la sol·licitud. Per fer això, hem de configurar la secció BODY de POSTMAN, seleccionar <code>www-form-urlencoded</code> i establir els paràmetres.</p>
<p>Si volem un nombre il·limitat de paràmetres, podem crear una matriu i crear múltiples paràmetres a POSTMAN amb el mateix nom:</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Java</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-12-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-12-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-12-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-12-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-12-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-12-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-12-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-12-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-12-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-12-10">10</a></span>
<span class="normal"><a href="#__codelineno-12-11">11</a></span>
<span class="normal"><a href="#__codelineno-12-12">12</a></span>
<span class="normal"><a href="#__codelineno-12-13">13</a></span>
<span class="normal"><a href="#__codelineno-12-14">14</a></span>
<span class="normal"><a href="#__codelineno-12-15">15</a></span>
<span class="normal"><a href="#__codelineno-12-16">16</a></span>
<span class="normal"><a href="#__codelineno-12-17">17</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-12-1" name="__codelineno-12-1"></a><span class="nd">@PostMapping</span><span class="p">(</span><span class="s">&quot;/lots&quot;</span><span class="p">)</span>
<a id="__codelineno-12-2" name="__codelineno-12-2"></a><span class="nd">@ResponseBody</span>
<a id="__codelineno-12-3" name="__codelineno-12-3"></a><span class="kd">public</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="nf">lots</span><span class="p">(</span><span class="nd">@RequestParam</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="o">[]</span><span class="w"> </span><span class="n">params</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-12-4" name="__codelineno-12-4"></a><span class="w">  </span><span class="n">String</span><span class="w"> </span><span class="n">res</span><span class="o">=</span><span class="s">&quot;&quot;</span><span class="p">;</span>
<a id="__codelineno-12-5" name="__codelineno-12-5"></a><span class="w">  </span><span class="n">myLog</span><span class="p">.</span><span class="na">info</span><span class="p">(</span><span class="s">&quot;POST Request from -&gt; &quot;</span><span class="o">+</span><span class="n">context</span><span class="p">.</span><span class="na">getRemoteAddr</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&quot; Port-&gt;&quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">context</span><span class="p">.</span><span class="na">getRemotePort</span><span class="p">());</span>
<a id="__codelineno-12-6" name="__codelineno-12-6"></a><span class="w">  </span><span class="k">if</span><span class="p">(</span><span class="n">params</span><span class="o">==</span><span class="kc">null</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="n">params</span><span class="p">.</span><span class="na">length</span><span class="o">==</span><span class="mi">0</span><span class="p">)</span>
<a id="__codelineno-12-7" name="__codelineno-12-7"></a><span class="w">    </span><span class="n">res</span><span class="o">=</span><span class="w"> </span><span class="s">&quot;A POST request without params.&quot;</span><span class="p">;</span>
<a id="__codelineno-12-8" name="__codelineno-12-8"></a><span class="w">  </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-12-9" name="__codelineno-12-9"></a><span class="w">    </span><span class="n">res</span><span class="o">=</span><span class="s">&quot;The list of params is:\n&quot;</span><span class="p">;</span>
<a id="__codelineno-12-10" name="__codelineno-12-10"></a><span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">param</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">params</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-12-11" name="__codelineno-12-11"></a><span class="w">      </span><span class="n">res</span><span class="o">+=</span><span class="n">param</span><span class="o">+</span><span class="s">&quot;\n&quot;</span><span class="p">;</span>
<a id="__codelineno-12-12" name="__codelineno-12-12"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-12-13" name="__codelineno-12-13"></a><span class="w">    </span><span class="n">res</span><span class="o">=</span><span class="n">res</span><span class="p">.</span><span class="na">substring</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="n">res</span><span class="p">.</span><span class="na">length</span><span class="p">()</span><span class="o">-</span><span class="mi">1</span><span class="p">);</span>
<a id="__codelineno-12-14" name="__codelineno-12-14"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-12-15" name="__codelineno-12-15"></a>
<a id="__codelineno-12-16" name="__codelineno-12-16"></a><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="n">res</span><span class="p">;</span>
<a id="__codelineno-12-17" name="__codelineno-12-17"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p><center><img alt="MultipleParams" src="../img/MultipleParams.png" width="95%" /></center></p>
<h3 id="57-variables-en-el-cami">5.7. Variables en el camí</h3>
<p>Si volem obtenir un valor específic, en forma de valor en el camí, per exemple <code>GET films/1</code> en lloc de <code>GET films?idFilm=1</code>, la manera és la següent:</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Java</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-13-1">1</a></span>
<span class="normal"><a href="#__codelineno-13-2">2</a></span>
<span class="normal"><a href="#__codelineno-13-3">3</a></span>
<span class="normal"><a href="#__codelineno-13-4">4</a></span>
<span class="normal"><a href="#__codelineno-13-5">5</a></span>
<span class="normal"><a href="#__codelineno-13-6">6</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-13-1" name="__codelineno-13-1"></a><span class="nd">@GetMapping</span><span class="p">(</span><span class="s">&quot;/who/{idWho}&quot;</span><span class="p">)</span>
<a id="__codelineno-13-2" name="__codelineno-13-2"></a><span class="nd">@ResponseBody</span>
<a id="__codelineno-13-3" name="__codelineno-13-3"></a><span class="kd">public</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="nf">who</span><span class="p">(</span><span class="nd">@PathVariable</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">idWho</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-13-4" name="__codelineno-13-4"></a><span class="w">  </span><span class="n">myLog</span><span class="p">.</span><span class="na">info</span><span class="p">(</span><span class="s">&quot;GET Request from -&gt; &quot;</span><span class="o">+</span><span class="n">context</span><span class="p">.</span><span class="na">getRemoteAddr</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&quot; Port-&gt;&quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">context</span><span class="p">.</span><span class="na">getRemotePort</span><span class="p">());</span>
<a id="__codelineno-13-5" name="__codelineno-13-5"></a><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="s">&quot;You are looking for &quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">idWho</span><span class="p">;</span>
<a id="__codelineno-13-6" name="__codelineno-13-6"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>La petició respon:</p>
<p><center><img alt="PathVariable" src="../img/PathVariable.png" width="95%" /></center></p>
<p>Com podem veure:</p>
<ul>
<li>A l'aplicació establim en el camí el paràmetre <code>idWho</code>.</li>
<li>Al controlador definim el paràmetre com a String per a poder accedir des del nostre mètode.</li>
<li>Al fer la petició, el valor s'assigna des de la petició al paràmetre de la funció.</li>
</ul>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["content.code.copy", "content.code.select", "content.code.annotate"], "search": "../../assets/javascripts/workers/search.6ce7567c.min.js", "translations": {"clipboard.copied": "Copiat al porta-retalls", "clipboard.copy": "C\u00f2pia al porta-retalls", "search.result.more.one": "1 m\u00e9s en aquesta p\u00e0gina", "search.result.more.other": "# m\u00e9s en aquesta p\u00e0gina", "search.result.none": "Cap document coincideix", "search.result.one": "1 document coincident", "search.result.other": "# documents coincidents", "search.result.placeholder": "Escriu per a comen\u00e7ar a cercar", "search.result.term.missing": "Desaparegut", "select.version": "Selecciona la versi\u00f3"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.83f73b43.min.js"></script>
      
        <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      
    
  </body>
</html>